<h1 id="creating-complex-animations">Creating Complex Animations</h1>
<p>I mentioned in the last section that a benefit of the refactors that we did to implement animations meant that we can easily modify it again to allow for more complex animations. In this example We are going to add a &quot;comet&quot; style animation. Now parts of what I am going to go through will be common to adding any advanced animation. As soon as I switch to writing the specific code to the animation I am going to add I will say so.</p>
<h2 id="the-changes">The Changes</h2>
<p>So to start we need to do some renaming. We are going to rename our <code>Animation</code> class from before to <code>SimpleAnimation</code>. This is so we can use <code>Animation</code> for a more general type. So to do this we need to change a few things. Firs things is to rename <code>Animation.mjs</code> to <code>SimpleAnimation.mjs</code>. And inside that file change the</p>
<code-snippet src="<% project.base_url %>/assets/advanced-animations-js-scripts.txt" lang="js" lines="1"></code-snippet>
<p>line to</p>
<code-snippet src="<% project.base_url %>/assets/advanced-animations-js-scripts.txt" lang="js" lines="3"></code-snippet>
<p>and in <code>index.mjs</code> replace</p>
<code-snippet src="<% project.base_url %>/assets/advanced-animations-js-scripts.txt" lang="js" lines="5"></code-snippet>
<p>with</p>
<code-snippet src="<% project.base_url %>/assets/advanced-animations-js-scripts.txt" lang="js" lines="7"></code-snippet>
<p>and replace any references to <code>Animation</code> in <code>index.mjs</code> with <code>SimpleAnimation</code>. This will essentially rename <code>Animation</code> to <code>SimpleAnimation</code></p>
<p>Once that is done we want to create a new file with the name <code>Animation.mjs</code>. This class will serve as a general base for all animations. It wont animate anything on it&#39;s own but will mean that we can make sure that all animations will behave in a certain way that our code can expect. Inside this file we want to add this content:</p>
<code-snippet src="<% project.base_url %>/assets/advanced-animations-js-scripts.txt" lang="js" lines="9-33"></code-snippet>
<p>This essentailly tells JavaScript that we want a general type Animation with some basic parameters so that when we create our custom animation later our code will be able to work with them.</p>
<p>Now back in <code>SimpleAnimation.mjs</code> at the very top we want to add this line:</p>
<code-snippet src="<% project.base_url %>/assets/advanced-animations-js-scripts.txt" lang="js" lines="34"></code-snippet>
<p>and we want to make a small change to the <code>export default class</code> line. After the <code>SimpleAnimation</code> name we want to add <code>extends Animation</code>. So it will end up looking like this:</p>
<code-snippet src="<% project.base_url %>/assets/advanced-animations-js-scripts.txt" lang="js" lines="36"></code-snippet>
<p>This tells JavaScript that <code>SimpleAnimation</code> is an <code>Animation</code> and that we will write <code>hasPixel()</code> and <code>getLEDColor()</code> methods for it. In this case these already exist from the last part so we have already met that condition. Now we can specify <code>SimpleAnimation</code> in any place from the last part that would take an <code>Animation</code>. This includes in the <code>AnimationManager</code>. Now note that we haven&#39;t changed the import at the top of <code>AnimationManager.mjs</code>, and that&#39;s because we want that file to use the general base type.</p>
<p>Now there is one other requirement of our new animation classes. Any custom animation must also specify a <code>totalTime</code> property. This is because how the <code>totalTime</code> works is not always the same and can&#39;t always be calculated straight up, as we will see later. So we just have to remember that this needs to be specified in some way for any custom animations, otherwise the <code>AnimationManager</code> won&#39;t know when the animation has finished.</p>
<h2 id="writing-a-custom-animation">Writing a Custom Animation</h2>
<p>From here on most of the code is unique to this &#39;comet&#39; animation type but it still provides a good example for writing your own.</p>
<p>So to start we create a new file to keep our class. For this example we will create <code>CometAnimation.mjs</code>. Create that in the same folder as all of our other code. Inside this file add these lines:</p>
<code-snippet src="<% project.base_url %>/assets/advanced-animations-js-scripts.txt" lang="js" lines="38-43"></code-snippet>
<p>This adds the new <code>CometAnimation</code> class that we will write our custom animation code in.</p>
<p>Inside the <code>CometAnimation</code> class add these 3 functions:</p>
<code-snippet src="<% project.base_url %>/assets/advanced-animations-js-scripts.txt" lang="js" lines="44-81"></code-snippet>
<p>So as I said earlier we need to specify the <code>totalTime</code> property as well as the <code>hasPixel()</code> and <code>getLEDColor()</code> methods so that the <code>AnimationManager</code> can work with it. So we will start by implementing the <code>getLEDColor()</code> method.</p>
<p>The way this animation is going to work is that it is going to be a &#39;comet&#39; that goes along the LED strip with a trail. It will be made up of an LED at the head with the <code>headColor</code> color and then behind that a trail of <code>trailLength</code> LEDs that fade to <code>tailColor</code> as it moves to the end of the trail. It will also fade out over the same distance so the last LED will be only slightly lit while the head LED will be fully on. So to implement this we need a few equations. The first will be the alpha of the animation layer. We&#39;ll write this based off of a curve defined by our equation. Don&#39;t worry too much though as I&#39;ll do all of the maths and figuring out the equations, I just need to explain how they work and why we have them. A good tool to use to both visualize and create your own curves is <a href="https://www.desmos.com/calculator">Desmos</a>. It provides a graphing tool that you can use to visualise the equations as well as animate them with parameters.</p>
<p>Our first equation is the position of the comet at any point in time. Because the comet is moving at a constant speed we can use some simple linear equations to determine this. Our first part is the variable <code>p</code>. This is the proportion of the animation that we are through. So at the start of the animation it is 0 and by the end it has reached 1.</p>
<p><?xml version='1.0' encoding='UTF-8'?>
<!-- Generated by CodeCogs with dvisvgm 2.9.1 -->
<svg class="svg-image" version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='101.848745pt' height='32.899932pt' viewBox='-.237167 -.227884 101.848745 32.899932'>
<defs>
<path id='g1-61' d='M9.683682-4.648167C9.884529-4.648167 10.14276-4.648167 10.14276-4.906399C10.14276-5.178977 9.898875-5.178977 9.683682-5.178977H1.233773C1.032926-5.178977 .774695-5.178977 .774695-4.920745C.774695-4.648167 1.01858-4.648167 1.233773-4.648167H9.683682ZM9.683682-1.979775C9.884529-1.979775 10.14276-1.979775 10.14276-2.238007C10.14276-2.510584 9.898875-2.510584 9.683682-2.510584H1.233773C1.032926-2.510584 .774695-2.510584 .774695-2.252353C.774695-1.979775 1.01858-1.979775 1.233773-1.979775H9.683682Z'/>
<path id='g0-84' d='M5.982364-8.751179C6.068441-9.095488 6.097133-9.224604 6.312326-9.281989C6.427096-9.310681 6.90052-9.310681 7.20179-9.310681C8.63641-9.310681 9.310681-9.253296 9.310681-8.134293C9.310681-7.9191 9.253296-7.373945 9.167219-6.843135L9.152873-6.670981C9.152873-6.613596 9.210258-6.527519 9.296335-6.527519C9.439797-6.527519 9.439797-6.59925 9.482835-6.828789L9.898875-9.368066C9.927567-9.497182 9.927567-9.525874 9.927567-9.568913C9.927567-9.726721 9.84149-9.726721 9.554566-9.726721H1.707197C1.377235-9.726721 1.362889-9.712374 1.276811-9.454143L.401693-6.871828C.387347-6.843135 .344309-6.685327 .344309-6.670981C.344309-6.59925 .401693-6.527519 .487771-6.527519C.60254-6.527519 .631233-6.584904 .688617-6.771404C1.291158-8.507294 1.592428-9.310681 3.500472-9.310681H4.461667C4.805976-9.310681 4.949438-9.310681 4.949438-9.152873C4.949438-9.109834 4.949438-9.081142 4.877707-8.82291L2.955316-1.119003C2.811854-.559502 2.783162-.41604 1.262465-.41604C.90381-.41604 .803387-.41604 .803387-.143462C.803387 0 .961195 0 1.032926 0C1.391581 0 1.764582-.028692 2.123237-.028692H4.361243C4.719898-.028692 5.107246 0 5.465901 0C5.623709 0 5.767171 0 5.767171-.272578C5.767171-.41604 5.666747-.41604 5.293746-.41604C4.002589-.41604 4.002589-.545155 4.002589-.760348C4.002589-.774695 4.002589-.875118 4.059973-1.104657L5.982364-8.751179Z'/>
<path id='g0-97' d='M4.318205-1.707197C4.246474-1.463312 4.246474-1.43462 4.045627-1.162042C3.730011-.760348 3.098778-.143462 2.424507-.143462C1.836313-.143462 1.506351-.674271 1.506351-1.520697C1.506351-2.309738 1.951083-3.916511 2.22366-4.519052C2.711431-5.523285 3.385702-6.039748 3.945204-6.039748C4.892053-6.039748 5.078553-4.86336 5.078553-4.748591C5.078553-4.734245 5.035515-4.547744 5.021168-4.519052L4.318205-1.707197ZM5.236361-5.379823C5.078553-5.752824 4.691206-6.326672 3.945204-6.326672C2.324084-6.326672 .573848-4.232128 .573848-2.108891C.573848-.688617 1.405927 .143462 2.381468 .143462C3.170509 .143462 3.84478-.473424 4.246474-.946849C4.389936-.100423 5.064207 .143462 5.494593 .143462S6.269288-.11477 6.527519-.631233C6.757058-1.119003 6.957905-1.994121 6.957905-2.051506C6.957905-2.123237 6.90052-2.180622 6.814443-2.180622C6.685327-2.180622 6.670981-2.108891 6.613596-1.893698C6.398403-1.047272 6.125826-.143462 5.537632-.143462C5.121592-.143462 5.092899-.516463 5.092899-.803387C5.092899-1.133349 5.135938-1.291158 5.265054-1.850659C5.365477-2.209314 5.437208-2.52493 5.551978-2.94097C6.082787-5.092899 6.211903-5.609363 6.211903-5.69544C6.211903-5.896286 6.054095-6.054095 5.838902-6.054095C5.379823-6.054095 5.265054-5.551978 5.236361-5.379823Z'/>
<path id='g0-101' d='M2.567969-3.328317C2.955316-3.328317 3.930858-3.35701 4.619475-3.615241C5.709786-4.031281 5.810209-4.86336 5.810209-5.121592C5.810209-5.752824 5.265054-6.326672 4.318205-6.326672C2.811854-6.326672 .645579-4.963784 .645579-2.410161C.645579-.90381 1.506351 .143462 2.811854 .143462C4.762937 .143462 5.99671-1.377235 5.99671-1.563735C5.99671-1.649813 5.910633-1.721543 5.853248-1.721543C5.810209-1.721543 5.795863-1.707197 5.666747-1.578082C4.748591-.358655 3.385702-.143462 2.840547-.143462C2.022814-.143462 1.592428-.789041 1.592428-1.850659C1.592428-2.051506 1.592428-2.410161 1.807621-3.328317H2.567969ZM1.879352-3.615241C2.496238-5.824555 3.859127-6.039748 4.318205-6.039748C4.949438-6.039748 5.379823-5.666747 5.379823-5.121592C5.379823-3.615241 3.084432-3.615241 2.481892-3.615241H1.879352Z'/>
<path id='g0-105' d='M4.059973-2.051506C4.059973-2.123237 4.002589-2.180622 3.916511-2.180622C3.787396-2.180622 3.773049-2.137583 3.701318-1.893698C3.328317-.588194 2.740123-.143462 2.266699-.143462C2.094545-.143462 1.893698-.186501 1.893698-.616886C1.893698-1.004234 2.065852-1.43462 2.22366-1.865005L3.227894-4.533398C3.270933-4.648167 3.371356-4.906399 3.371356-5.178977C3.371356-5.781517 2.94097-6.326672 2.238007-6.326672C.918157-6.326672 .387347-4.246474 .387347-4.131704C.387347-4.07432 .444732-4.002589 .545155-4.002589C.674271-4.002589 .688617-4.059973 .746002-4.26082C1.090311-5.465901 1.635466-6.039748 2.194968-6.039748C2.324084-6.039748 2.567969-6.025402 2.567969-5.566324C2.567969-5.193323 2.381468-4.719898 2.266699-4.404282L1.262465-1.73589C1.176388-1.506351 1.090311-1.276811 1.090311-1.01858C1.090311-.373001 1.535043 .143462 2.22366 .143462C3.54351 .143462 4.059973-1.951083 4.059973-2.051506ZM3.945204-8.952026C3.945204-9.167219 3.773049-9.425451 3.457433-9.425451C3.127471-9.425451 2.75447-9.109834 2.75447-8.736833C2.75447-8.378178 3.05574-8.263409 3.227894-8.263409C3.615241-8.263409 3.945204-8.63641 3.945204-8.952026Z'/>
<path id='g0-108' d='M3.643934-9.597605C3.65828-9.65499 3.686972-9.741067 3.686972-9.812798C3.686972-9.95626 3.54351-9.95626 3.514818-9.95626C3.500472-9.95626 2.984009-9.913221 2.725777-9.884529C2.481892-9.870183 2.266699-9.84149 2.008467-9.827144C1.664159-9.798452 1.563735-9.784105 1.563735-9.525874C1.563735-9.382412 1.707197-9.382412 1.850659-9.382412C2.582315-9.382412 2.582315-9.253296 2.582315-9.109834C2.582315-9.052449 2.582315-9.023757 2.510584-8.765526L.731656-1.649813C.688617-1.492004 .659925-1.377235 .659925-1.147696C.659925-.430386 1.190734 .143462 1.92239 .143462C2.395815 .143462 2.711431-.172154 2.94097-.616886C3.184855-1.090311 3.385702-1.994121 3.385702-2.051506C3.385702-2.123237 3.328317-2.180622 3.24224-2.180622C3.113124-2.180622 3.098778-2.108891 3.041393-1.893698C2.783162-.90381 2.52493-.143462 1.951083-.143462C1.520697-.143462 1.520697-.60254 1.520697-.803387C1.520697-.860772 1.520697-1.162042 1.62112-1.563735L3.643934-9.597605Z'/>
<path id='g0-109' d='M2.955316-4.203435C2.984009-4.289513 3.342664-5.006822 3.873473-5.465901C4.246474-5.810209 4.734245-6.039748 5.293746-6.039748C5.867594-6.039748 6.068441-5.609363 6.068441-5.035515C6.068441-4.949438 6.068441-4.662514 5.896286-3.988242L5.537632-2.510584C5.422862-2.080198 5.150284-1.01858 5.121592-.860772C5.064207-.645579 4.97813-.272578 4.97813-.215193C4.97813-.014346 5.135938 .143462 5.351131 .143462C5.781517 .143462 5.853248-.186501 5.982364-.702964L6.843135-4.131704C6.871828-4.246474 7.61783-6.039748 9.195911-6.039748C9.769759-6.039748 9.970606-5.609363 9.970606-5.035515C9.970606-4.232128 9.411104-2.668392 9.095488-1.807621C8.966372-1.463312 8.894641-1.276811 8.894641-1.01858C8.894641-.373001 9.339373 .143462 10.027991 .143462C11.362187 .143462 11.864304-1.965429 11.864304-2.051506C11.864304-2.123237 11.806919-2.180622 11.720842-2.180622C11.591726-2.180622 11.57738-2.137583 11.505649-1.893698C11.175686-.746002 10.644877-.143462 10.071029-.143462C9.927567-.143462 9.698028-.157808 9.698028-.616886C9.698028-.989888 9.870183-1.448966 9.927567-1.606774C10.185799-2.295391 10.831378-3.988242 10.831378-4.820322C10.831378-5.681093 10.329261-6.326672 9.23895-6.326672C8.277755-6.326672 7.50306-5.781517 6.929213-4.935091C6.886174-5.709786 6.412749-6.326672 5.336785-6.326672C4.059973-6.326672 3.385702-5.422862 3.127471-5.064207C3.084432-5.88194 2.496238-6.326672 1.865005-6.326672C1.448966-6.326672 1.119003-6.125826 .846426-5.58067C.588194-5.064207 .387347-4.189089 .387347-4.131704S.444732-4.002589 .545155-4.002589C.659925-4.002589 .674271-4.016935 .760348-4.346897C.975541-5.193323 1.248119-6.039748 1.821967-6.039748C2.151929-6.039748 2.266699-5.810209 2.266699-5.379823C2.266699-5.064207 2.123237-4.504705 2.022814-4.059973L1.62112-2.510584C1.563735-2.238007 1.405927-1.592428 1.334196-1.334196C1.233773-.961195 1.075965-.286924 1.075965-.215193C1.075965-.014346 1.233773 .143462 1.448966 .143462C1.62112 .143462 1.821967 .057385 1.936736-.157808C1.965429-.229539 2.094545-.731656 2.166276-1.01858L2.481892-2.309738L2.955316-4.203435Z'/>
<path id='g0-111' d='M6.541865-3.945204C6.541865-5.308092 5.652401-6.326672 4.346897-6.326672C2.453199-6.326672 .588194-4.26082 .588194-2.238007C.588194-.875118 1.477658 .143462 2.783162 .143462C4.691206 .143462 6.541865-1.92239 6.541865-3.945204ZM2.797508-.143462C2.080198-.143462 1.549389-.71731 1.549389-1.721543C1.549389-2.381468 1.893698-3.84478 2.295391-4.56209C2.94097-5.666747 3.744357-6.039748 4.332551-6.039748C5.035515-6.039748 5.58067-5.465901 5.58067-4.461667C5.58067-3.887819 5.2794-2.352776 4.734245-1.477658C4.146051-.516463 3.35701-.143462 2.797508-.143462Z'/>
<path id='g0-112' d='M.616886 1.821967C.516463 2.252353 .459078 2.367122-.129116 2.367122C-.30127 2.367122-.444732 2.367122-.444732 2.6397C-.444732 2.668392-.430386 2.783162-.272578 2.783162C-.086077 2.783162 .11477 2.75447 .30127 2.75447H.918157C1.219427 2.75447 1.951083 2.783162 2.252353 2.783162C2.33843 2.783162 2.510584 2.783162 2.510584 2.52493C2.510584 2.367122 2.410161 2.367122 2.166276 2.367122C1.506351 2.367122 1.463312 2.266699 1.463312 2.151929C1.463312 1.979775 2.108891-.487771 2.194968-.817733C2.352776-.41604 2.740123 .143462 3.486126 .143462C5.107246 .143462 6.857482-1.965429 6.857482-4.07432C6.857482-5.39417 6.111479-6.326672 5.035515-6.326672C4.117358-6.326672 3.342664-5.437208 3.184855-5.236361C3.070086-5.953671 2.510584-6.326672 1.936736-6.326672C1.520697-6.326672 1.190734-6.125826 .918157-5.58067C.659925-5.064207 .459078-4.189089 .459078-4.131704S.516463-4.002589 .616886-4.002589C.731656-4.002589 .746002-4.016935 .832079-4.346897C1.047272-5.193323 1.31985-6.039748 1.893698-6.039748C2.22366-6.039748 2.33843-5.810209 2.33843-5.379823C2.33843-5.035515 2.295391-4.892053 2.238007-4.633821L.616886 1.821967ZM3.098778-4.476013C3.199202-4.877707 3.600895-5.293746 3.830434-5.494593C3.988242-5.638055 4.461667-6.039748 5.006822-6.039748C5.638055-6.039748 5.924979-5.408516 5.924979-4.662514C5.924979-3.973896 5.523285-2.352776 5.16463-1.606774C4.805976-.832079 4.146051-.143462 3.486126-.143462C2.510584-.143462 2.352776-1.377235 2.352776-1.43462C2.352776-1.477658 2.381468-1.592428 2.395815-1.664159L3.098778-4.476013Z'/>
<path id='g0-116' d='M2.883585-5.767171H4.203435C4.476013-5.767171 4.619475-5.767171 4.619475-6.025402C4.619475-6.18321 4.533398-6.18321 4.246474-6.18321H2.984009L3.514818-8.277755C3.572203-8.478602 3.572203-8.507294 3.572203-8.607717C3.572203-8.837257 3.385702-8.966372 3.199202-8.966372C3.084432-8.966372 2.75447-8.923334 2.6397-8.464255L2.080198-6.18321H.731656C.444732-6.18321 .315616-6.18321 .315616-5.910633C.315616-5.767171 .41604-5.767171 .688617-5.767171H1.965429L1.01858-1.979775C.90381-1.477658 .860772-1.334196 .860772-1.147696C.860772-.473424 1.334196 .143462 2.137583 .143462C3.586549 .143462 4.361243-1.951083 4.361243-2.051506C4.361243-2.137583 4.303859-2.180622 4.217782-2.180622C4.189089-2.180622 4.131704-2.180622 4.103012-2.123237C4.088666-2.108891 4.07432-2.094545 3.973896-1.865005C3.672626-1.147696 3.012701-.143462 2.180622-.143462C1.750236-.143462 1.721543-.502117 1.721543-.817733C1.721543-.832079 1.721543-1.104657 1.764582-1.276811L2.883585-5.767171Z'/>
</defs>
<g id='page1' transform='matrix(1.13 0 0 1.13 -63.481611 -60.997055)'>
<use x='56.413267' y='72.908782' xlink:href='#g0-112'/>
<use x='67.448431' y='72.908782' xlink:href='#g1-61'/>
<use x='100.496189' y='63.203478' xlink:href='#g0-116'/>
<use x='105.568779' y='63.203478' xlink:href='#g0-105'/>
<use x='110.360895' y='63.203478' xlink:href='#g0-109'/>
<use x='122.64801' y='63.203478' xlink:href='#g0-101'/>
<rect x='83.554517' y='69.035322' height='.573822' width='62.545651'/>
<use x='83.554517' y='82.749549' xlink:href='#g0-116'/>
<use x='88.627107' y='82.749549' xlink:href='#g0-111'/>
<use x='95.380029' y='82.749549' xlink:href='#g0-116'/>
<use x='100.452618' y='82.749549' xlink:href='#g0-97'/>
<use x='107.826548' y='82.749549' xlink:href='#g0-108'/>
<use x='112.326301' y='82.749549' xlink:href='#g0-84'/>
<use x='122.510486' y='82.749549' xlink:href='#g0-105'/>
<use x='127.302602' y='82.749549' xlink:href='#g0-109'/>
<use x='139.589718' y='82.749549' xlink:href='#g0-101'/>
</g>
</svg></p>
<p>From that we can calculate the position of the comet head. Now there are two equations for doing this and which one we use depends on if this is a pingPong comet or not. So for the basic animation it is as simple as:</p>
<p><?xml version='1.0' encoding='UTF-8'?>
<!-- Generated by CodeCogs with dvisvgm 2.9.1 -->
<svg class="svg-image" version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='125.98336pt' height='14.719771pt' viewBox='-.239051 -.235833 125.98336 14.719771'>
<defs>
<path id='g2-43' d='M5.724132-3.313971H9.683682C9.884529-3.313971 10.14276-3.313971 10.14276-3.572203C10.14276-3.84478 9.898875-3.84478 9.683682-3.84478H5.724132V-7.80433C5.724132-8.005177 5.724132-8.263409 5.465901-8.263409C5.193323-8.263409 5.193323-8.019523 5.193323-7.80433V-3.84478H1.233773C1.032926-3.84478 .774695-3.84478 .774695-3.586549C.774695-3.313971 1.01858-3.313971 1.233773-3.313971H5.193323V.645579C5.193323 .846426 5.193323 1.104657 5.451554 1.104657C5.724132 1.104657 5.724132 .860772 5.724132 .645579V-3.313971Z'/>
<path id='g0-3' d='M3.945204-6.125826C3.95955-6.326672 3.95955-6.670981 3.586549-6.670981C3.35701-6.670981 3.170509-6.48448 3.213548-6.29798V-6.111479L3.414395-3.887819L1.578082-5.222015C1.448966-5.293746 1.420273-5.322439 1.31985-5.322439C1.119003-5.322439 .932503-5.121592 .932503-4.920745C.932503-4.691206 1.075965-4.633821 1.219427-4.56209L3.256586-3.586549L1.276811-2.625354C1.047272-2.510584 .932503-2.453199 .932503-2.238007S1.119003-1.836313 1.31985-1.836313C1.420273-1.836313 1.448966-1.836313 1.807621-2.108891L3.414395-3.270933L3.199202-.860772C3.199202-.559502 3.457433-.487771 3.572203-.487771C3.744357-.487771 3.95955-.588194 3.95955-.860772L3.744357-3.270933L5.58067-1.936736C5.709786-1.865005 5.738478-1.836313 5.838902-1.836313C6.039748-1.836313 6.226249-2.03716 6.226249-2.238007C6.226249-2.453199 6.097133-2.52493 5.924979-2.611008C5.064207-3.041393 5.035515-3.041393 3.902165-3.572203L5.88194-4.533398C6.111479-4.648167 6.226249-4.705552 6.226249-4.920745S6.039748-5.322439 5.838902-5.322439C5.738478-5.322439 5.709786-5.322439 5.351131-5.049861L3.744357-3.887819L3.945204-6.125826Z'/>
<path id='g1-101' d='M2.567969-3.328317C2.955316-3.328317 3.930858-3.35701 4.619475-3.615241C5.709786-4.031281 5.810209-4.86336 5.810209-5.121592C5.810209-5.752824 5.265054-6.326672 4.318205-6.326672C2.811854-6.326672 .645579-4.963784 .645579-2.410161C.645579-.90381 1.506351 .143462 2.811854 .143462C4.762937 .143462 5.99671-1.377235 5.99671-1.563735C5.99671-1.649813 5.910633-1.721543 5.853248-1.721543C5.810209-1.721543 5.795863-1.707197 5.666747-1.578082C4.748591-.358655 3.385702-.143462 2.840547-.143462C2.022814-.143462 1.592428-.789041 1.592428-1.850659C1.592428-2.051506 1.592428-2.410161 1.807621-3.328317H2.567969ZM1.879352-3.615241C2.496238-5.824555 3.859127-6.039748 4.318205-6.039748C4.949438-6.039748 5.379823-5.666747 5.379823-5.121592C5.379823-3.615241 3.084432-3.615241 2.481892-3.615241H1.879352Z'/>
<path id='g1-102' d='M6.398403-5.767171C6.685327-5.767171 6.800097-5.767171 6.800097-6.039748C6.800097-6.18321 6.685327-6.18321 6.427096-6.18321H5.265054C5.537632-7.660868 5.738478-8.679448 5.853248-9.138527C5.939325-9.482835 6.240595-9.812798 6.613596-9.812798C6.914866-9.812798 7.216136-9.683682 7.359598-9.554566C6.800097-9.497182 6.627942-9.081142 6.627942-8.837257C6.627942-8.550333 6.843135-8.378178 7.115713-8.378178C7.402637-8.378178 7.833023-8.622064 7.833023-9.167219C7.833023-9.769759 7.230483-10.099722 6.59925-10.099722C5.982364-10.099722 5.379823-9.640643 5.092899-9.081142C4.834668-8.579025 4.691206-8.062562 4.361243-6.18321H3.400048C3.127471-6.18321 2.984009-6.18321 2.984009-5.924979C2.984009-5.767171 3.070086-5.767171 3.35701-5.767171H4.275166C4.016935-4.432974 3.428741-1.190734 3.098778 .344309C2.854893 1.592428 2.6397 2.6397 1.92239 2.6397C1.879352 2.6397 1.463312 2.6397 1.20508 2.367122C1.936736 2.309738 1.936736 1.678505 1.936736 1.664159C1.936736 1.377235 1.721543 1.20508 1.448966 1.20508C1.162042 1.20508 .731656 1.448966 .731656 1.994121C.731656 2.611008 1.362889 2.926624 1.92239 2.926624C3.385702 2.926624 3.988242 .30127 4.146051-.41604C4.404282-1.520697 5.107246-5.336785 5.178977-5.767171H6.398403Z'/>
<path id='g1-103' d='M4.849014-1.821967C4.791629-1.592428 4.762937-1.535043 4.576436-1.31985C3.988242-.559502 3.385702-.286924 2.94097-.286924C2.467546-.286924 2.022814-.659925 2.022814-1.649813C2.022814-2.410161 2.453199-4.016935 2.768816-4.662514C3.184855-5.465901 3.830434-6.039748 4.432974-6.039748C5.379823-6.039748 5.566324-4.86336 5.566324-4.777283L5.523285-4.576436L4.849014-1.821967ZM5.738478-5.379823C5.551978-5.795863 5.150284-6.326672 4.432974-6.326672C2.869239-6.326672 1.090311-4.361243 1.090311-2.22366C1.090311-.731656 1.994121 0 2.912278 0C3.672626 0 4.346897-.60254 4.605129-.889464L4.289513 .401693C4.088666 1.190734 4.002589 1.549389 3.486126 2.051506C2.897932 2.6397 2.352776 2.6397 2.03716 2.6397C1.606774 2.6397 1.248119 2.611008 .889464 2.496238C1.348542 2.367122 1.463312 1.965429 1.463312 1.807621C1.463312 1.578082 1.291158 1.348542 .975541 1.348542C.631233 1.348542 .258232 1.635466 .258232 2.108891C.258232 2.697085 .846426 2.926624 2.065852 2.926624C3.916511 2.926624 4.877707 1.73589 5.064207 .961195L6.656635-5.465901C6.699673-5.638055 6.699673-5.666747 6.699673-5.69544C6.699673-5.896286 6.541865-6.054095 6.326672-6.054095C5.982364-6.054095 5.781517-5.767171 5.738478-5.379823Z'/>
<path id='g1-104' d='M4.031281-9.597605C4.045627-9.65499 4.07432-9.741067 4.07432-9.812798C4.07432-9.95626 3.930858-9.95626 3.902165-9.95626C3.887819-9.95626 3.184855-9.898875 3.113124-9.884529C2.869239-9.870183 2.654046-9.84149 2.395815-9.827144C2.03716-9.798452 1.936736-9.784105 1.936736-9.525874C1.936736-9.382412 2.051506-9.382412 2.252353-9.382412C2.955316-9.382412 2.969663-9.253296 2.969663-9.109834C2.969663-9.023757 2.94097-8.908988 2.926624-8.865949L.846426-.559502C.789041-.344309 .789041-.315616 .789041-.229539C.789041 .086077 1.032926 .143462 1.176388 .143462C1.420273 .143462 1.606774-.043039 1.678505-.200847L2.324084-2.797508C2.395815-3.113124 2.481892-3.414395 2.553623-3.730011C2.711431-4.332551 2.711431-4.346897 2.984009-4.762937S3.902165-6.039748 5.006822-6.039748C5.58067-6.039748 5.781517-5.609363 5.781517-5.035515C5.781517-4.232128 5.222015-2.668392 4.906399-1.807621C4.777283-1.463312 4.705552-1.276811 4.705552-1.01858C4.705552-.373001 5.150284 .143462 5.838902 .143462C7.173098 .143462 7.675215-1.965429 7.675215-2.051506C7.675215-2.123237 7.61783-2.180622 7.531753-2.180622C7.402637-2.180622 7.388291-2.137583 7.31656-1.893698C6.986597-.746002 6.455788-.143462 5.88194-.143462C5.738478-.143462 5.508939-.157808 5.508939-.616886C5.508939-.989888 5.681093-1.448966 5.738478-1.606774C5.99671-2.295391 6.642289-3.988242 6.642289-4.820322C6.642289-5.681093 6.140172-6.326672 5.049861-6.326672C4.232128-6.326672 3.514818-5.939325 2.926624-5.193323L4.031281-9.597605Z'/>
<path id='g1-108' d='M3.643934-9.597605C3.65828-9.65499 3.686972-9.741067 3.686972-9.812798C3.686972-9.95626 3.54351-9.95626 3.514818-9.95626C3.500472-9.95626 2.984009-9.913221 2.725777-9.884529C2.481892-9.870183 2.266699-9.84149 2.008467-9.827144C1.664159-9.798452 1.563735-9.784105 1.563735-9.525874C1.563735-9.382412 1.707197-9.382412 1.850659-9.382412C2.582315-9.382412 2.582315-9.253296 2.582315-9.109834C2.582315-9.052449 2.582315-9.023757 2.510584-8.765526L.731656-1.649813C.688617-1.492004 .659925-1.377235 .659925-1.147696C.659925-.430386 1.190734 .143462 1.92239 .143462C2.395815 .143462 2.711431-.172154 2.94097-.616886C3.184855-1.090311 3.385702-1.994121 3.385702-2.051506C3.385702-2.123237 3.328317-2.180622 3.24224-2.180622C3.113124-2.180622 3.098778-2.108891 3.041393-1.893698C2.783162-.90381 2.52493-.143462 1.951083-.143462C1.520697-.143462 1.520697-.60254 1.520697-.803387C1.520697-.860772 1.520697-1.162042 1.62112-1.563735L3.643934-9.597605Z'/>
<path id='g1-109' d='M2.955316-4.203435C2.984009-4.289513 3.342664-5.006822 3.873473-5.465901C4.246474-5.810209 4.734245-6.039748 5.293746-6.039748C5.867594-6.039748 6.068441-5.609363 6.068441-5.035515C6.068441-4.949438 6.068441-4.662514 5.896286-3.988242L5.537632-2.510584C5.422862-2.080198 5.150284-1.01858 5.121592-.860772C5.064207-.645579 4.97813-.272578 4.97813-.215193C4.97813-.014346 5.135938 .143462 5.351131 .143462C5.781517 .143462 5.853248-.186501 5.982364-.702964L6.843135-4.131704C6.871828-4.246474 7.61783-6.039748 9.195911-6.039748C9.769759-6.039748 9.970606-5.609363 9.970606-5.035515C9.970606-4.232128 9.411104-2.668392 9.095488-1.807621C8.966372-1.463312 8.894641-1.276811 8.894641-1.01858C8.894641-.373001 9.339373 .143462 10.027991 .143462C11.362187 .143462 11.864304-1.965429 11.864304-2.051506C11.864304-2.123237 11.806919-2.180622 11.720842-2.180622C11.591726-2.180622 11.57738-2.137583 11.505649-1.893698C11.175686-.746002 10.644877-.143462 10.071029-.143462C9.927567-.143462 9.698028-.157808 9.698028-.616886C9.698028-.989888 9.870183-1.448966 9.927567-1.606774C10.185799-2.295391 10.831378-3.988242 10.831378-4.820322C10.831378-5.681093 10.329261-6.326672 9.23895-6.326672C8.277755-6.326672 7.50306-5.781517 6.929213-4.935091C6.886174-5.709786 6.412749-6.326672 5.336785-6.326672C4.059973-6.326672 3.385702-5.422862 3.127471-5.064207C3.084432-5.88194 2.496238-6.326672 1.865005-6.326672C1.448966-6.326672 1.119003-6.125826 .846426-5.58067C.588194-5.064207 .387347-4.189089 .387347-4.131704S.444732-4.002589 .545155-4.002589C.659925-4.002589 .674271-4.016935 .760348-4.346897C.975541-5.193323 1.248119-6.039748 1.821967-6.039748C2.151929-6.039748 2.266699-5.810209 2.266699-5.379823C2.266699-5.064207 2.123237-4.504705 2.022814-4.059973L1.62112-2.510584C1.563735-2.238007 1.405927-1.592428 1.334196-1.334196C1.233773-.961195 1.075965-.286924 1.075965-.215193C1.075965-.014346 1.233773 .143462 1.448966 .143462C1.62112 .143462 1.821967 .057385 1.936736-.157808C1.965429-.229539 2.094545-.731656 2.166276-1.01858L2.481892-2.309738L2.955316-4.203435Z'/>
<path id='g1-110' d='M2.955316-4.203435C2.984009-4.289513 3.342664-5.006822 3.873473-5.465901C4.246474-5.810209 4.734245-6.039748 5.293746-6.039748C5.867594-6.039748 6.068441-5.609363 6.068441-5.035515C6.068441-4.217782 5.480247-2.582315 5.193323-1.807621C5.064207-1.463312 4.992476-1.276811 4.992476-1.01858C4.992476-.373001 5.437208 .143462 6.125826 .143462C7.460022 .143462 7.962139-1.965429 7.962139-2.051506C7.962139-2.123237 7.904754-2.180622 7.818677-2.180622C7.689561-2.180622 7.675215-2.137583 7.603484-1.893698C7.273521-.71731 6.728366-.143462 6.168864-.143462C6.025402-.143462 5.795863-.157808 5.795863-.616886C5.795863-.975541 5.953671-1.405927 6.039748-1.606774C6.326672-2.395815 6.929213-4.002589 6.929213-4.820322C6.929213-5.681093 6.427096-6.326672 5.336785-6.326672C4.059973-6.326672 3.385702-5.422862 3.127471-5.064207C3.084432-5.88194 2.496238-6.326672 1.865005-6.326672C1.405927-6.326672 1.090311-6.054095 .846426-5.566324C.588194-5.049861 .387347-4.189089 .387347-4.131704S.444732-4.002589 .545155-4.002589C.659925-4.002589 .674271-4.016935 .760348-4.346897C.989888-5.222015 1.248119-6.039748 1.821967-6.039748C2.151929-6.039748 2.266699-5.810209 2.266699-5.379823C2.266699-5.064207 2.123237-4.504705 2.022814-4.059973L1.62112-2.510584C1.563735-2.238007 1.405927-1.592428 1.334196-1.334196C1.233773-.961195 1.075965-.286924 1.075965-.215193C1.075965-.014346 1.233773 .143462 1.448966 .143462C1.62112 .143462 1.821967 .057385 1.936736-.157808C1.965429-.229539 2.094545-.731656 2.166276-1.01858L2.481892-2.309738L2.955316-4.203435Z'/>
<path id='g1-111' d='M6.541865-3.945204C6.541865-5.308092 5.652401-6.326672 4.346897-6.326672C2.453199-6.326672 .588194-4.26082 .588194-2.238007C.588194-.875118 1.477658 .143462 2.783162 .143462C4.691206 .143462 6.541865-1.92239 6.541865-3.945204ZM2.797508-.143462C2.080198-.143462 1.549389-.71731 1.549389-1.721543C1.549389-2.381468 1.893698-3.84478 2.295391-4.56209C2.94097-5.666747 3.744357-6.039748 4.332551-6.039748C5.035515-6.039748 5.58067-5.465901 5.58067-4.461667C5.58067-3.887819 5.2794-2.352776 4.734245-1.477658C4.146051-.516463 3.35701-.143462 2.797508-.143462Z'/>
<path id='g1-112' d='M.616886 1.821967C.516463 2.252353 .459078 2.367122-.129116 2.367122C-.30127 2.367122-.444732 2.367122-.444732 2.6397C-.444732 2.668392-.430386 2.783162-.272578 2.783162C-.086077 2.783162 .11477 2.75447 .30127 2.75447H.918157C1.219427 2.75447 1.951083 2.783162 2.252353 2.783162C2.33843 2.783162 2.510584 2.783162 2.510584 2.52493C2.510584 2.367122 2.410161 2.367122 2.166276 2.367122C1.506351 2.367122 1.463312 2.266699 1.463312 2.151929C1.463312 1.979775 2.108891-.487771 2.194968-.817733C2.352776-.41604 2.740123 .143462 3.486126 .143462C5.107246 .143462 6.857482-1.965429 6.857482-4.07432C6.857482-5.39417 6.111479-6.326672 5.035515-6.326672C4.117358-6.326672 3.342664-5.437208 3.184855-5.236361C3.070086-5.953671 2.510584-6.326672 1.936736-6.326672C1.520697-6.326672 1.190734-6.125826 .918157-5.58067C.659925-5.064207 .459078-4.189089 .459078-4.131704S.516463-4.002589 .616886-4.002589C.731656-4.002589 .746002-4.016935 .832079-4.346897C1.047272-5.193323 1.31985-6.039748 1.893698-6.039748C2.22366-6.039748 2.33843-5.810209 2.33843-5.379823C2.33843-5.035515 2.295391-4.892053 2.238007-4.633821L.616886 1.821967ZM3.098778-4.476013C3.199202-4.877707 3.600895-5.293746 3.830434-5.494593C3.988242-5.638055 4.461667-6.039748 5.006822-6.039748C5.638055-6.039748 5.924979-5.408516 5.924979-4.662514C5.924979-3.973896 5.523285-2.352776 5.16463-1.606774C4.805976-.832079 4.146051-.143462 3.486126-.143462C2.510584-.143462 2.352776-1.377235 2.352776-1.43462C2.352776-1.477658 2.381468-1.592428 2.395815-1.664159L3.098778-4.476013Z'/>
<path id='g1-114' d='M5.58067-5.867594C5.135938-5.781517 4.906399-5.465901 4.906399-5.150284C4.906399-4.805976 5.178977-4.691206 5.379823-4.691206C5.781517-4.691206 6.111479-5.035515 6.111479-5.465901C6.111479-5.924979 5.666747-6.326672 4.949438-6.326672C4.37559-6.326672 3.715665-6.068441 3.113124-5.193323C3.012701-5.953671 2.438853-6.326672 1.865005-6.326672C1.305504-6.326672 1.01858-5.896286 .846426-5.58067C.60254-5.064207 .387347-4.203435 .387347-4.131704C.387347-4.07432 .444732-4.002589 .545155-4.002589C.659925-4.002589 .674271-4.016935 .760348-4.346897C.975541-5.207669 1.248119-6.039748 1.821967-6.039748C2.166276-6.039748 2.266699-5.795863 2.266699-5.379823C2.266699-5.064207 2.123237-4.504705 2.022814-4.059973L1.62112-2.510584C1.563735-2.238007 1.405927-1.592428 1.334196-1.334196C1.233773-.961195 1.075965-.286924 1.075965-.215193C1.075965-.014346 1.233773 .143462 1.448966 .143462C1.606774 .143462 1.879352 .043039 1.965429-.243885C2.008467-.358655 2.539277-2.52493 2.625354-2.854893C2.697085-3.170509 2.783162-3.471779 2.854893-3.787396C2.912278-3.988242 2.969663-4.217782 3.012701-4.404282C3.05574-4.533398 3.443087-5.236361 3.801742-5.551978C3.973896-5.709786 4.346897-6.039748 4.935091-6.039748C5.16463-6.039748 5.39417-5.99671 5.58067-5.867594Z'/>
<path id='g1-116' d='M2.883585-5.767171H4.203435C4.476013-5.767171 4.619475-5.767171 4.619475-6.025402C4.619475-6.18321 4.533398-6.18321 4.246474-6.18321H2.984009L3.514818-8.277755C3.572203-8.478602 3.572203-8.507294 3.572203-8.607717C3.572203-8.837257 3.385702-8.966372 3.199202-8.966372C3.084432-8.966372 2.75447-8.923334 2.6397-8.464255L2.080198-6.18321H.731656C.444732-6.18321 .315616-6.18321 .315616-5.910633C.315616-5.767171 .41604-5.767171 .688617-5.767171H1.965429L1.01858-1.979775C.90381-1.477658 .860772-1.334196 .860772-1.147696C.860772-.473424 1.334196 .143462 2.137583 .143462C3.586549 .143462 4.361243-1.951083 4.361243-2.051506C4.361243-2.137583 4.303859-2.180622 4.217782-2.180622C4.189089-2.180622 4.131704-2.180622 4.103012-2.123237C4.088666-2.108891 4.07432-2.094545 3.973896-1.865005C3.672626-1.147696 3.012701-.143462 2.180622-.143462C1.750236-.143462 1.721543-.502117 1.721543-.817733C1.721543-.832079 1.721543-1.104657 1.764582-1.276811L2.883585-5.767171Z'/>
</defs>
<g id='page1' transform='matrix(1.13 0 0 1.13 -63.986043 -63.124517)'>
<use x='56.413267' y='65.753425' xlink:href='#g1-108'/>
<use x='60.91302' y='65.753425' xlink:href='#g1-101'/>
<use x='67.423546' y='65.753425' xlink:href='#g1-110'/>
<use x='75.808669' y='65.753425' xlink:href='#g1-103'/>
<use x='83.049768' y='65.753425' xlink:href='#g1-116'/>
<use x='88.122357' y='65.753425' xlink:href='#g1-104'/>
<use x='99.396616' y='65.753425' xlink:href='#g0-3'/>
<use x='109.757737' y='65.753425' xlink:href='#g1-112'/>
<use x='119.995902' y='65.753425' xlink:href='#g2-43'/>
<use x='134.109475' y='65.753425' xlink:href='#g1-102'/>
<use x='142.56519' y='65.753425' xlink:href='#g1-114'/>
<use x='149.28574' y='65.753425' xlink:href='#g1-111'/>
<use x='156.038663' y='65.753425' xlink:href='#g1-109'/>
</g>
</svg></p>
<p>But for a pingPong animation it is a bit more complex:</p>
<p><?xml version='1.0' encoding='UTF-8'?>
<!-- Generated by CodeCogs with dvisvgm 2.9.1 -->
<svg class="svg-image" version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='245.525088pt' height='16.227412pt' viewBox='-.239051 -.233036 245.525088 16.227412'>
<defs>
<path id='g2-40' d='M4.662514 3.486126C4.662514 3.443087 4.662514 3.414395 4.418628 3.170509C2.984009 1.721543 2.180622-.645579 2.180622-3.572203C2.180622-6.355365 2.854893-8.751179 4.519052-10.44403C4.662514-10.573146 4.662514-10.601839 4.662514-10.644877C4.662514-10.730954 4.590783-10.759647 4.533398-10.759647C4.346897-10.759647 3.170509-9.726721 2.467546-8.320793C1.73589-6.871828 1.405927-5.336785 1.405927-3.572203C1.405927-2.295391 1.606774-.588194 2.352776 .946849C3.199202 2.668392 4.37559 3.600895 4.533398 3.600895C4.590783 3.600895 4.662514 3.572203 4.662514 3.486126Z'/>
<path id='g2-41' d='M4.045627-3.572203C4.045627-4.662514 3.902165-6.441442 3.098778-8.105601C2.252353-9.827144 1.075965-10.759647 .918157-10.759647C.860772-10.759647 .789041-10.730954 .789041-10.644877C.789041-10.601839 .789041-10.573146 1.032926-10.329261C2.467546-8.880295 3.270933-6.513173 3.270933-3.586549C3.270933-.803387 2.596661 1.592428 .932503 3.285279C.789041 3.414395 .789041 3.443087 .789041 3.486126C.789041 3.572203 .860772 3.600895 .918157 3.600895C1.104657 3.600895 2.281045 2.567969 2.984009 1.162042C3.715665-.30127 4.045627-1.850659 4.045627-3.572203Z'/>
<path id='g2-43' d='M5.724132-3.313971H9.683682C9.884529-3.313971 10.14276-3.313971 10.14276-3.572203C10.14276-3.84478 9.898875-3.84478 9.683682-3.84478H5.724132V-7.80433C5.724132-8.005177 5.724132-8.263409 5.465901-8.263409C5.193323-8.263409 5.193323-8.019523 5.193323-7.80433V-3.84478H1.233773C1.032926-3.84478 .774695-3.84478 .774695-3.586549C.774695-3.313971 1.01858-3.313971 1.233773-3.313971H5.193323V.645579C5.193323 .846426 5.193323 1.104657 5.451554 1.104657C5.724132 1.104657 5.724132 .860772 5.724132 .645579V-3.313971Z'/>
<path id='g2-49' d='M4.131704-9.195911C4.131704-9.525874 4.131704-9.54022 3.84478-9.54022C3.500472-9.152873 2.783162-8.622064 1.305504-8.622064V-8.206024C1.635466-8.206024 2.352776-8.206024 3.141817-8.579025V-1.104657C3.141817-.588194 3.098778-.41604 1.836313-.41604H1.391581V0C1.778928-.028692 3.170509-.028692 3.643934-.028692S5.494593-.028692 5.88194 0V-.41604H5.437208C4.174743-.41604 4.131704-.588194 4.131704-1.104657V-9.195911Z'/>
<path id='g2-50' d='M6.312326-2.410161H5.99671C5.953671-2.166276 5.838902-1.377235 5.69544-1.147696C5.595016-1.01858 4.777283-1.01858 4.346897-1.01858H1.692851C2.080198-1.348542 2.955316-2.266699 3.328317-2.611008C5.508939-4.619475 6.312326-5.365477 6.312326-6.785751C6.312326-8.435563 5.006822-9.54022 3.342664-9.54022S.702964-8.119947 .702964-6.886174C.702964-6.154518 1.334196-6.154518 1.377235-6.154518C1.678505-6.154518 2.051506-6.369711 2.051506-6.828789C2.051506-7.230483 1.778928-7.50306 1.377235-7.50306C1.248119-7.50306 1.219427-7.50306 1.176388-7.488714C1.448966-8.464255 2.22366-9.12418 3.156163-9.12418C4.37559-9.12418 5.121592-8.105601 5.121592-6.785751C5.121592-5.566324 4.418628-4.504705 3.600895-3.586549L.702964-.344309V0H5.939325L6.312326-2.410161Z'/>
<path id='g0-0' d='M9.454143-3.299625C9.698028-3.299625 9.95626-3.299625 9.95626-3.586549S9.698028-3.873473 9.454143-3.873473H1.692851C1.448966-3.873473 1.190734-3.873473 1.190734-3.586549S1.448966-3.299625 1.692851-3.299625H9.454143Z'/>
<path id='g0-3' d='M3.945204-6.125826C3.95955-6.326672 3.95955-6.670981 3.586549-6.670981C3.35701-6.670981 3.170509-6.48448 3.213548-6.29798V-6.111479L3.414395-3.887819L1.578082-5.222015C1.448966-5.293746 1.420273-5.322439 1.31985-5.322439C1.119003-5.322439 .932503-5.121592 .932503-4.920745C.932503-4.691206 1.075965-4.633821 1.219427-4.56209L3.256586-3.586549L1.276811-2.625354C1.047272-2.510584 .932503-2.453199 .932503-2.238007S1.119003-1.836313 1.31985-1.836313C1.420273-1.836313 1.448966-1.836313 1.807621-2.108891L3.414395-3.270933L3.199202-.860772C3.199202-.559502 3.457433-.487771 3.572203-.487771C3.744357-.487771 3.95955-.588194 3.95955-.860772L3.744357-3.270933L5.58067-1.936736C5.709786-1.865005 5.738478-1.836313 5.838902-1.836313C6.039748-1.836313 6.226249-2.03716 6.226249-2.238007C6.226249-2.453199 6.097133-2.52493 5.924979-2.611008C5.064207-3.041393 5.035515-3.041393 3.902165-3.572203L5.88194-4.533398C6.111479-4.648167 6.226249-4.705552 6.226249-4.920745S6.039748-5.322439 5.838902-5.322439C5.738478-5.322439 5.709786-5.322439 5.351131-5.049861L3.744357-3.887819L3.945204-6.125826Z'/>
<path id='g1-59' d='M2.797508 .057385C2.797508-.774695 2.52493-1.391581 1.936736-1.391581C1.477658-1.391581 1.248119-1.01858 1.248119-.702964S1.463312 0 1.951083 0C2.137583 0 2.295391-.057385 2.424507-.186501C2.453199-.215193 2.467546-.215193 2.481892-.215193C2.510584-.215193 2.510584-.014346 2.510584 .057385C2.510584 .530809 2.424507 1.463312 1.592428 2.395815C1.43462 2.567969 1.43462 2.596661 1.43462 2.625354C1.43462 2.697085 1.506351 2.768816 1.578082 2.768816C1.692851 2.768816 2.797508 1.707197 2.797508 .057385Z'/>
<path id='g1-101' d='M2.567969-3.328317C2.955316-3.328317 3.930858-3.35701 4.619475-3.615241C5.709786-4.031281 5.810209-4.86336 5.810209-5.121592C5.810209-5.752824 5.265054-6.326672 4.318205-6.326672C2.811854-6.326672 .645579-4.963784 .645579-2.410161C.645579-.90381 1.506351 .143462 2.811854 .143462C4.762937 .143462 5.99671-1.377235 5.99671-1.563735C5.99671-1.649813 5.910633-1.721543 5.853248-1.721543C5.810209-1.721543 5.795863-1.707197 5.666747-1.578082C4.748591-.358655 3.385702-.143462 2.840547-.143462C2.022814-.143462 1.592428-.789041 1.592428-1.850659C1.592428-2.051506 1.592428-2.410161 1.807621-3.328317H2.567969ZM1.879352-3.615241C2.496238-5.824555 3.859127-6.039748 4.318205-6.039748C4.949438-6.039748 5.379823-5.666747 5.379823-5.121592C5.379823-3.615241 3.084432-3.615241 2.481892-3.615241H1.879352Z'/>
<path id='g1-102' d='M6.398403-5.767171C6.685327-5.767171 6.800097-5.767171 6.800097-6.039748C6.800097-6.18321 6.685327-6.18321 6.427096-6.18321H5.265054C5.537632-7.660868 5.738478-8.679448 5.853248-9.138527C5.939325-9.482835 6.240595-9.812798 6.613596-9.812798C6.914866-9.812798 7.216136-9.683682 7.359598-9.554566C6.800097-9.497182 6.627942-9.081142 6.627942-8.837257C6.627942-8.550333 6.843135-8.378178 7.115713-8.378178C7.402637-8.378178 7.833023-8.622064 7.833023-9.167219C7.833023-9.769759 7.230483-10.099722 6.59925-10.099722C5.982364-10.099722 5.379823-9.640643 5.092899-9.081142C4.834668-8.579025 4.691206-8.062562 4.361243-6.18321H3.400048C3.127471-6.18321 2.984009-6.18321 2.984009-5.924979C2.984009-5.767171 3.070086-5.767171 3.35701-5.767171H4.275166C4.016935-4.432974 3.428741-1.190734 3.098778 .344309C2.854893 1.592428 2.6397 2.6397 1.92239 2.6397C1.879352 2.6397 1.463312 2.6397 1.20508 2.367122C1.936736 2.309738 1.936736 1.678505 1.936736 1.664159C1.936736 1.377235 1.721543 1.20508 1.448966 1.20508C1.162042 1.20508 .731656 1.448966 .731656 1.994121C.731656 2.611008 1.362889 2.926624 1.92239 2.926624C3.385702 2.926624 3.988242 .30127 4.146051-.41604C4.404282-1.520697 5.107246-5.336785 5.178977-5.767171H6.398403Z'/>
<path id='g1-103' d='M4.849014-1.821967C4.791629-1.592428 4.762937-1.535043 4.576436-1.31985C3.988242-.559502 3.385702-.286924 2.94097-.286924C2.467546-.286924 2.022814-.659925 2.022814-1.649813C2.022814-2.410161 2.453199-4.016935 2.768816-4.662514C3.184855-5.465901 3.830434-6.039748 4.432974-6.039748C5.379823-6.039748 5.566324-4.86336 5.566324-4.777283L5.523285-4.576436L4.849014-1.821967ZM5.738478-5.379823C5.551978-5.795863 5.150284-6.326672 4.432974-6.326672C2.869239-6.326672 1.090311-4.361243 1.090311-2.22366C1.090311-.731656 1.994121 0 2.912278 0C3.672626 0 4.346897-.60254 4.605129-.889464L4.289513 .401693C4.088666 1.190734 4.002589 1.549389 3.486126 2.051506C2.897932 2.6397 2.352776 2.6397 2.03716 2.6397C1.606774 2.6397 1.248119 2.611008 .889464 2.496238C1.348542 2.367122 1.463312 1.965429 1.463312 1.807621C1.463312 1.578082 1.291158 1.348542 .975541 1.348542C.631233 1.348542 .258232 1.635466 .258232 2.108891C.258232 2.697085 .846426 2.926624 2.065852 2.926624C3.916511 2.926624 4.877707 1.73589 5.064207 .961195L6.656635-5.465901C6.699673-5.638055 6.699673-5.666747 6.699673-5.69544C6.699673-5.896286 6.541865-6.054095 6.326672-6.054095C5.982364-6.054095 5.781517-5.767171 5.738478-5.379823Z'/>
<path id='g1-104' d='M4.031281-9.597605C4.045627-9.65499 4.07432-9.741067 4.07432-9.812798C4.07432-9.95626 3.930858-9.95626 3.902165-9.95626C3.887819-9.95626 3.184855-9.898875 3.113124-9.884529C2.869239-9.870183 2.654046-9.84149 2.395815-9.827144C2.03716-9.798452 1.936736-9.784105 1.936736-9.525874C1.936736-9.382412 2.051506-9.382412 2.252353-9.382412C2.955316-9.382412 2.969663-9.253296 2.969663-9.109834C2.969663-9.023757 2.94097-8.908988 2.926624-8.865949L.846426-.559502C.789041-.344309 .789041-.315616 .789041-.229539C.789041 .086077 1.032926 .143462 1.176388 .143462C1.420273 .143462 1.606774-.043039 1.678505-.200847L2.324084-2.797508C2.395815-3.113124 2.481892-3.414395 2.553623-3.730011C2.711431-4.332551 2.711431-4.346897 2.984009-4.762937S3.902165-6.039748 5.006822-6.039748C5.58067-6.039748 5.781517-5.609363 5.781517-5.035515C5.781517-4.232128 5.222015-2.668392 4.906399-1.807621C4.777283-1.463312 4.705552-1.276811 4.705552-1.01858C4.705552-.373001 5.150284 .143462 5.838902 .143462C7.173098 .143462 7.675215-1.965429 7.675215-2.051506C7.675215-2.123237 7.61783-2.180622 7.531753-2.180622C7.402637-2.180622 7.388291-2.137583 7.31656-1.893698C6.986597-.746002 6.455788-.143462 5.88194-.143462C5.738478-.143462 5.508939-.157808 5.508939-.616886C5.508939-.989888 5.681093-1.448966 5.738478-1.606774C5.99671-2.295391 6.642289-3.988242 6.642289-4.820322C6.642289-5.681093 6.140172-6.326672 5.049861-6.326672C4.232128-6.326672 3.514818-5.939325 2.926624-5.193323L4.031281-9.597605Z'/>
<path id='g1-105' d='M4.059973-2.051506C4.059973-2.123237 4.002589-2.180622 3.916511-2.180622C3.787396-2.180622 3.773049-2.137583 3.701318-1.893698C3.328317-.588194 2.740123-.143462 2.266699-.143462C2.094545-.143462 1.893698-.186501 1.893698-.616886C1.893698-1.004234 2.065852-1.43462 2.22366-1.865005L3.227894-4.533398C3.270933-4.648167 3.371356-4.906399 3.371356-5.178977C3.371356-5.781517 2.94097-6.326672 2.238007-6.326672C.918157-6.326672 .387347-4.246474 .387347-4.131704C.387347-4.07432 .444732-4.002589 .545155-4.002589C.674271-4.002589 .688617-4.059973 .746002-4.26082C1.090311-5.465901 1.635466-6.039748 2.194968-6.039748C2.324084-6.039748 2.567969-6.025402 2.567969-5.566324C2.567969-5.193323 2.381468-4.719898 2.266699-4.404282L1.262465-1.73589C1.176388-1.506351 1.090311-1.276811 1.090311-1.01858C1.090311-.373001 1.535043 .143462 2.22366 .143462C3.54351 .143462 4.059973-1.951083 4.059973-2.051506ZM3.945204-8.952026C3.945204-9.167219 3.773049-9.425451 3.457433-9.425451C3.127471-9.425451 2.75447-9.109834 2.75447-8.736833C2.75447-8.378178 3.05574-8.263409 3.227894-8.263409C3.615241-8.263409 3.945204-8.63641 3.945204-8.952026Z'/>
<path id='g1-108' d='M3.643934-9.597605C3.65828-9.65499 3.686972-9.741067 3.686972-9.812798C3.686972-9.95626 3.54351-9.95626 3.514818-9.95626C3.500472-9.95626 2.984009-9.913221 2.725777-9.884529C2.481892-9.870183 2.266699-9.84149 2.008467-9.827144C1.664159-9.798452 1.563735-9.784105 1.563735-9.525874C1.563735-9.382412 1.707197-9.382412 1.850659-9.382412C2.582315-9.382412 2.582315-9.253296 2.582315-9.109834C2.582315-9.052449 2.582315-9.023757 2.510584-8.765526L.731656-1.649813C.688617-1.492004 .659925-1.377235 .659925-1.147696C.659925-.430386 1.190734 .143462 1.92239 .143462C2.395815 .143462 2.711431-.172154 2.94097-.616886C3.184855-1.090311 3.385702-1.994121 3.385702-2.051506C3.385702-2.123237 3.328317-2.180622 3.24224-2.180622C3.113124-2.180622 3.098778-2.108891 3.041393-1.893698C2.783162-.90381 2.52493-.143462 1.951083-.143462C1.520697-.143462 1.520697-.60254 1.520697-.803387C1.520697-.860772 1.520697-1.162042 1.62112-1.563735L3.643934-9.597605Z'/>
<path id='g1-109' d='M2.955316-4.203435C2.984009-4.289513 3.342664-5.006822 3.873473-5.465901C4.246474-5.810209 4.734245-6.039748 5.293746-6.039748C5.867594-6.039748 6.068441-5.609363 6.068441-5.035515C6.068441-4.949438 6.068441-4.662514 5.896286-3.988242L5.537632-2.510584C5.422862-2.080198 5.150284-1.01858 5.121592-.860772C5.064207-.645579 4.97813-.272578 4.97813-.215193C4.97813-.014346 5.135938 .143462 5.351131 .143462C5.781517 .143462 5.853248-.186501 5.982364-.702964L6.843135-4.131704C6.871828-4.246474 7.61783-6.039748 9.195911-6.039748C9.769759-6.039748 9.970606-5.609363 9.970606-5.035515C9.970606-4.232128 9.411104-2.668392 9.095488-1.807621C8.966372-1.463312 8.894641-1.276811 8.894641-1.01858C8.894641-.373001 9.339373 .143462 10.027991 .143462C11.362187 .143462 11.864304-1.965429 11.864304-2.051506C11.864304-2.123237 11.806919-2.180622 11.720842-2.180622C11.591726-2.180622 11.57738-2.137583 11.505649-1.893698C11.175686-.746002 10.644877-.143462 10.071029-.143462C9.927567-.143462 9.698028-.157808 9.698028-.616886C9.698028-.989888 9.870183-1.448966 9.927567-1.606774C10.185799-2.295391 10.831378-3.988242 10.831378-4.820322C10.831378-5.681093 10.329261-6.326672 9.23895-6.326672C8.277755-6.326672 7.50306-5.781517 6.929213-4.935091C6.886174-5.709786 6.412749-6.326672 5.336785-6.326672C4.059973-6.326672 3.385702-5.422862 3.127471-5.064207C3.084432-5.88194 2.496238-6.326672 1.865005-6.326672C1.448966-6.326672 1.119003-6.125826 .846426-5.58067C.588194-5.064207 .387347-4.189089 .387347-4.131704S.444732-4.002589 .545155-4.002589C.659925-4.002589 .674271-4.016935 .760348-4.346897C.975541-5.193323 1.248119-6.039748 1.821967-6.039748C2.151929-6.039748 2.266699-5.810209 2.266699-5.379823C2.266699-5.064207 2.123237-4.504705 2.022814-4.059973L1.62112-2.510584C1.563735-2.238007 1.405927-1.592428 1.334196-1.334196C1.233773-.961195 1.075965-.286924 1.075965-.215193C1.075965-.014346 1.233773 .143462 1.448966 .143462C1.62112 .143462 1.821967 .057385 1.936736-.157808C1.965429-.229539 2.094545-.731656 2.166276-1.01858L2.481892-2.309738L2.955316-4.203435Z'/>
<path id='g1-110' d='M2.955316-4.203435C2.984009-4.289513 3.342664-5.006822 3.873473-5.465901C4.246474-5.810209 4.734245-6.039748 5.293746-6.039748C5.867594-6.039748 6.068441-5.609363 6.068441-5.035515C6.068441-4.217782 5.480247-2.582315 5.193323-1.807621C5.064207-1.463312 4.992476-1.276811 4.992476-1.01858C4.992476-.373001 5.437208 .143462 6.125826 .143462C7.460022 .143462 7.962139-1.965429 7.962139-2.051506C7.962139-2.123237 7.904754-2.180622 7.818677-2.180622C7.689561-2.180622 7.675215-2.137583 7.603484-1.893698C7.273521-.71731 6.728366-.143462 6.168864-.143462C6.025402-.143462 5.795863-.157808 5.795863-.616886C5.795863-.975541 5.953671-1.405927 6.039748-1.606774C6.326672-2.395815 6.929213-4.002589 6.929213-4.820322C6.929213-5.681093 6.427096-6.326672 5.336785-6.326672C4.059973-6.326672 3.385702-5.422862 3.127471-5.064207C3.084432-5.88194 2.496238-6.326672 1.865005-6.326672C1.405927-6.326672 1.090311-6.054095 .846426-5.566324C.588194-5.049861 .387347-4.189089 .387347-4.131704S.444732-4.002589 .545155-4.002589C.659925-4.002589 .674271-4.016935 .760348-4.346897C.989888-5.222015 1.248119-6.039748 1.821967-6.039748C2.151929-6.039748 2.266699-5.810209 2.266699-5.379823C2.266699-5.064207 2.123237-4.504705 2.022814-4.059973L1.62112-2.510584C1.563735-2.238007 1.405927-1.592428 1.334196-1.334196C1.233773-.961195 1.075965-.286924 1.075965-.215193C1.075965-.014346 1.233773 .143462 1.448966 .143462C1.62112 .143462 1.821967 .057385 1.936736-.157808C1.965429-.229539 2.094545-.731656 2.166276-1.01858L2.481892-2.309738L2.955316-4.203435Z'/>
<path id='g1-111' d='M6.541865-3.945204C6.541865-5.308092 5.652401-6.326672 4.346897-6.326672C2.453199-6.326672 .588194-4.26082 .588194-2.238007C.588194-.875118 1.477658 .143462 2.783162 .143462C4.691206 .143462 6.541865-1.92239 6.541865-3.945204ZM2.797508-.143462C2.080198-.143462 1.549389-.71731 1.549389-1.721543C1.549389-2.381468 1.893698-3.84478 2.295391-4.56209C2.94097-5.666747 3.744357-6.039748 4.332551-6.039748C5.035515-6.039748 5.58067-5.465901 5.58067-4.461667C5.58067-3.887819 5.2794-2.352776 4.734245-1.477658C4.146051-.516463 3.35701-.143462 2.797508-.143462Z'/>
<path id='g1-112' d='M.616886 1.821967C.516463 2.252353 .459078 2.367122-.129116 2.367122C-.30127 2.367122-.444732 2.367122-.444732 2.6397C-.444732 2.668392-.430386 2.783162-.272578 2.783162C-.086077 2.783162 .11477 2.75447 .30127 2.75447H.918157C1.219427 2.75447 1.951083 2.783162 2.252353 2.783162C2.33843 2.783162 2.510584 2.783162 2.510584 2.52493C2.510584 2.367122 2.410161 2.367122 2.166276 2.367122C1.506351 2.367122 1.463312 2.266699 1.463312 2.151929C1.463312 1.979775 2.108891-.487771 2.194968-.817733C2.352776-.41604 2.740123 .143462 3.486126 .143462C5.107246 .143462 6.857482-1.965429 6.857482-4.07432C6.857482-5.39417 6.111479-6.326672 5.035515-6.326672C4.117358-6.326672 3.342664-5.437208 3.184855-5.236361C3.070086-5.953671 2.510584-6.326672 1.936736-6.326672C1.520697-6.326672 1.190734-6.125826 .918157-5.58067C.659925-5.064207 .459078-4.189089 .459078-4.131704S.516463-4.002589 .616886-4.002589C.731656-4.002589 .746002-4.016935 .832079-4.346897C1.047272-5.193323 1.31985-6.039748 1.893698-6.039748C2.22366-6.039748 2.33843-5.810209 2.33843-5.379823C2.33843-5.035515 2.295391-4.892053 2.238007-4.633821L.616886 1.821967ZM3.098778-4.476013C3.199202-4.877707 3.600895-5.293746 3.830434-5.494593C3.988242-5.638055 4.461667-6.039748 5.006822-6.039748C5.638055-6.039748 5.924979-5.408516 5.924979-4.662514C5.924979-3.973896 5.523285-2.352776 5.16463-1.606774C4.805976-.832079 4.146051-.143462 3.486126-.143462C2.510584-.143462 2.352776-1.377235 2.352776-1.43462C2.352776-1.477658 2.381468-1.592428 2.395815-1.664159L3.098778-4.476013Z'/>
<path id='g1-114' d='M5.58067-5.867594C5.135938-5.781517 4.906399-5.465901 4.906399-5.150284C4.906399-4.805976 5.178977-4.691206 5.379823-4.691206C5.781517-4.691206 6.111479-5.035515 6.111479-5.465901C6.111479-5.924979 5.666747-6.326672 4.949438-6.326672C4.37559-6.326672 3.715665-6.068441 3.113124-5.193323C3.012701-5.953671 2.438853-6.326672 1.865005-6.326672C1.305504-6.326672 1.01858-5.896286 .846426-5.58067C.60254-5.064207 .387347-4.203435 .387347-4.131704C.387347-4.07432 .444732-4.002589 .545155-4.002589C.659925-4.002589 .674271-4.016935 .760348-4.346897C.975541-5.207669 1.248119-6.039748 1.821967-6.039748C2.166276-6.039748 2.266699-5.795863 2.266699-5.379823C2.266699-5.064207 2.123237-4.504705 2.022814-4.059973L1.62112-2.510584C1.563735-2.238007 1.405927-1.592428 1.334196-1.334196C1.233773-.961195 1.075965-.286924 1.075965-.215193C1.075965-.014346 1.233773 .143462 1.448966 .143462C1.606774 .143462 1.879352 .043039 1.965429-.243885C2.008467-.358655 2.539277-2.52493 2.625354-2.854893C2.697085-3.170509 2.783162-3.471779 2.854893-3.787396C2.912278-3.988242 2.969663-4.217782 3.012701-4.404282C3.05574-4.533398 3.443087-5.236361 3.801742-5.551978C3.973896-5.709786 4.346897-6.039748 4.935091-6.039748C5.16463-6.039748 5.39417-5.99671 5.58067-5.867594Z'/>
<path id='g1-116' d='M2.883585-5.767171H4.203435C4.476013-5.767171 4.619475-5.767171 4.619475-6.025402C4.619475-6.18321 4.533398-6.18321 4.246474-6.18321H2.984009L3.514818-8.277755C3.572203-8.478602 3.572203-8.507294 3.572203-8.607717C3.572203-8.837257 3.385702-8.966372 3.199202-8.966372C3.084432-8.966372 2.75447-8.923334 2.6397-8.464255L2.080198-6.18321H.731656C.444732-6.18321 .315616-6.18321 .315616-5.910633C.315616-5.767171 .41604-5.767171 .688617-5.767171H1.965429L1.01858-1.979775C.90381-1.477658 .860772-1.334196 .860772-1.147696C.860772-.473424 1.334196 .143462 2.137583 .143462C3.586549 .143462 4.361243-1.951083 4.361243-2.051506C4.361243-2.137583 4.303859-2.180622 4.217782-2.180622C4.189089-2.180622 4.131704-2.180622 4.103012-2.123237C4.088666-2.108891 4.07432-2.094545 3.973896-1.865005C3.672626-1.147696 3.012701-.143462 2.180622-.143462C1.750236-.143462 1.721543-.502117 1.721543-.817733C1.721543-.832079 1.721543-1.104657 1.764582-1.276811L2.883585-5.767171Z'/>
</defs>
<g id='page1' transform='matrix(1.13 0 0 1.13 -63.986043 -62.376005)'>
<use x='56.413267' y='65.753425' xlink:href='#g1-108'/>
<use x='60.91302' y='65.753425' xlink:href='#g1-101'/>
<use x='67.423546' y='65.753425' xlink:href='#g1-110'/>
<use x='75.808669' y='65.753425' xlink:href='#g1-103'/>
<use x='83.049768' y='65.753425' xlink:href='#g1-116'/>
<use x='88.122357' y='65.753425' xlink:href='#g1-104'/>
<use x='99.396616' y='65.753425' xlink:href='#g0-3'/>
<use x='109.757737' y='65.753425' xlink:href='#g2-40'/>
<use x='115.220526' y='65.753425' xlink:href='#g2-50'/>
<use x='125.432107' y='65.753425' xlink:href='#g0-3'/>
<use x='135.793228' y='65.753425' xlink:href='#g1-109'/>
<use x='148.080344' y='65.753425' xlink:href='#g1-105'/>
<use x='152.87246' y='65.753425' xlink:href='#g1-110'/>
<use x='161.257583' y='65.753425' xlink:href='#g2-40'/>
<use x='166.720372' y='65.753425' xlink:href='#g2-49'/>
<use x='176.931954' y='65.753425' xlink:href='#g0-0'/>
<use x='191.278141' y='65.753425' xlink:href='#g1-112'/>
<use x='198.32831' y='65.753425' xlink:href='#g1-59'/>
<use x='204.621299' y='65.753425' xlink:href='#g1-112'/>
<use x='211.671468' y='65.753425' xlink:href='#g2-41'/>
<use x='217.134256' y='65.753425' xlink:href='#g2-41'/>
<use x='225.785041' y='65.753425' xlink:href='#g2-43'/>
<use x='239.898615' y='65.753425' xlink:href='#g1-102'/>
<use x='248.354329' y='65.753425' xlink:href='#g1-114'/>
<use x='255.07488' y='65.753425' xlink:href='#g1-111'/>
<use x='261.827802' y='65.753425' xlink:href='#g1-109'/>
</g>
</svg></p>
<p>This is because it needs to bounce back and forth in one loop.</p>
<p>Once we have determined our equations we can write the code for this function. So inside the <code>CometAnimation</code> class add this function:</p>
<code-snippet src="<% project.base_url %>/assets/advanced-animations-js-scripts.txt" lang="js" lines="82-86"></code-snippet>
<p>The next step is to figure out what direction the comet is moving. For non-looping and the simple non-pingPong loop animations this is always positive (the position increases with time). However for the pingPong form we need to figure out if it is going back to the start as we want the trail behind the comet. To do this it is just as simple as a small check on the time. So in the <code>CometAnimation</code> class add this method:</p>
<code-snippet src="<% project.base_url %>/assets/advanced-animations-js-scripts.txt" lang="js" lines="87-92"></code-snippet>
<p>Now that we know where the comet is and what direction it&#39;s going we can now figure out the alpha for each pixel on the strip. The equation to do so is fairly complex but that&#39;s only because it&#39;s made of a few equations combined together.</p>
<p>There are two main equations and they are just straight lines that meet to make a triangle that has a peak over out comet position. The slope of these lines is determined by a few parameters. The length of the trail and the direction the comet is going. To do this we need two variables <code>leftL</code> and <code>rightL</code>. This is the length of the fade for the left and right sides of the comet head.</p>
<p>They can be calculated like so:</p>
<code-snippet src="<% project.base_url %>/assets/advanced-animations-js-scripts.txt" lang="js" lines="93-95"></code-snippet>
<p>When the comet is moving in the positive direction then the tail on the &quot;left&quot; should be the trailLength and the fade on the &quot;right&quot; should be 1. These swap when the comet is going in the other direction.</p>
<p>With these variables we can calculate the line equation for both sides. We will use <code>z</code> to denote the position of the comet head form <code>getCometPos()</code>:</p>
<p>The left side is: <?xml version='1.0' encoding='UTF-8'?>
<!-- Generated by CodeCogs with dvisvgm 2.9.1 -->
<svg class="svg-image" version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='66.076693pt' height='32.543286pt' viewBox='-.244117 -.236623 66.076693 32.543286'>
<defs>
<path id='g2-43' d='M5.724132-3.313971H9.683682C9.884529-3.313971 10.14276-3.313971 10.14276-3.572203C10.14276-3.84478 9.898875-3.84478 9.683682-3.84478H5.724132V-7.80433C5.724132-8.005177 5.724132-8.263409 5.465901-8.263409C5.193323-8.263409 5.193323-8.019523 5.193323-7.80433V-3.84478H1.233773C1.032926-3.84478 .774695-3.84478 .774695-3.586549C.774695-3.313971 1.01858-3.313971 1.233773-3.313971H5.193323V.645579C5.193323 .846426 5.193323 1.104657 5.451554 1.104657C5.724132 1.104657 5.724132 .860772 5.724132 .645579V-3.313971Z'/>
<path id='g2-49' d='M4.131704-9.195911C4.131704-9.525874 4.131704-9.54022 3.84478-9.54022C3.500472-9.152873 2.783162-8.622064 1.305504-8.622064V-8.206024C1.635466-8.206024 2.352776-8.206024 3.141817-8.579025V-1.104657C3.141817-.588194 3.098778-.41604 1.836313-.41604H1.391581V0C1.778928-.028692 3.170509-.028692 3.643934-.028692S5.494593-.028692 5.88194 0V-.41604H5.437208C4.174743-.41604 4.131704-.588194 4.131704-1.104657V-9.195911Z'/>
<path id='g0-0' d='M9.454143-3.299625C9.698028-3.299625 9.95626-3.299625 9.95626-3.586549S9.698028-3.873473 9.454143-3.873473H1.692851C1.448966-3.873473 1.190734-3.873473 1.190734-3.586549S1.448966-3.299625 1.692851-3.299625H9.454143Z'/>
<path id='g1-76' d='M5.265054-8.693795C5.39417-9.23895 5.437208-9.382412 6.699673-9.382412C7.087021-9.382412 7.187444-9.382412 7.187444-9.65499C7.187444-9.798452 7.029636-9.798452 6.972251-9.798452C6.685327-9.798452 6.355365-9.769759 6.068441-9.769759H4.146051C3.873473-9.769759 3.557857-9.798452 3.285279-9.798452C3.170509-9.798452 3.012701-9.798452 3.012701-9.525874C3.012701-9.382412 3.141817-9.382412 3.35701-9.382412C4.232128-9.382412 4.232128-9.267642 4.232128-9.109834C4.232128-9.081142 4.232128-8.995065 4.174743-8.779872L2.238007-1.061618C2.108891-.559502 2.080198-.41604 1.075965-.41604C.803387-.41604 .659925-.41604 .659925-.157808C.659925 0 .746002 0 1.032926 0H7.460022C7.775638 0 7.789984-.014346 7.890408-.272578L8.995065-3.328317C9.023757-3.400048 9.052449-3.486126 9.052449-3.529164C9.052449-3.615241 8.980718-3.672626 8.908988-3.672626C8.894641-3.672626 8.82291-3.672626 8.794218-3.615241C8.765526-3.600895 8.765526-3.572203 8.650756-3.299625C8.191678-2.03716 7.546099-.41604 5.121592-.41604H3.744357C3.54351-.41604 3.514818-.41604 3.428741-.430386C3.270933-.444732 3.256586-.473424 3.256586-.588194C3.256586-.688617 3.285279-.774695 3.313971-.90381L5.265054-8.693795Z'/>
<path id='g1-101' d='M2.567969-3.328317C2.955316-3.328317 3.930858-3.35701 4.619475-3.615241C5.709786-4.031281 5.810209-4.86336 5.810209-5.121592C5.810209-5.752824 5.265054-6.326672 4.318205-6.326672C2.811854-6.326672 .645579-4.963784 .645579-2.410161C.645579-.90381 1.506351 .143462 2.811854 .143462C4.762937 .143462 5.99671-1.377235 5.99671-1.563735C5.99671-1.649813 5.910633-1.721543 5.853248-1.721543C5.810209-1.721543 5.795863-1.707197 5.666747-1.578082C4.748591-.358655 3.385702-.143462 2.840547-.143462C2.022814-.143462 1.592428-.789041 1.592428-1.850659C1.592428-2.051506 1.592428-2.410161 1.807621-3.328317H2.567969ZM1.879352-3.615241C2.496238-5.824555 3.859127-6.039748 4.318205-6.039748C4.949438-6.039748 5.379823-5.666747 5.379823-5.121592C5.379823-3.615241 3.084432-3.615241 2.481892-3.615241H1.879352Z'/>
<path id='g1-102' d='M6.398403-5.767171C6.685327-5.767171 6.800097-5.767171 6.800097-6.039748C6.800097-6.18321 6.685327-6.18321 6.427096-6.18321H5.265054C5.537632-7.660868 5.738478-8.679448 5.853248-9.138527C5.939325-9.482835 6.240595-9.812798 6.613596-9.812798C6.914866-9.812798 7.216136-9.683682 7.359598-9.554566C6.800097-9.497182 6.627942-9.081142 6.627942-8.837257C6.627942-8.550333 6.843135-8.378178 7.115713-8.378178C7.402637-8.378178 7.833023-8.622064 7.833023-9.167219C7.833023-9.769759 7.230483-10.099722 6.59925-10.099722C5.982364-10.099722 5.379823-9.640643 5.092899-9.081142C4.834668-8.579025 4.691206-8.062562 4.361243-6.18321H3.400048C3.127471-6.18321 2.984009-6.18321 2.984009-5.924979C2.984009-5.767171 3.070086-5.767171 3.35701-5.767171H4.275166C4.016935-4.432974 3.428741-1.190734 3.098778 .344309C2.854893 1.592428 2.6397 2.6397 1.92239 2.6397C1.879352 2.6397 1.463312 2.6397 1.20508 2.367122C1.936736 2.309738 1.936736 1.678505 1.936736 1.664159C1.936736 1.377235 1.721543 1.20508 1.448966 1.20508C1.162042 1.20508 .731656 1.448966 .731656 1.994121C.731656 2.611008 1.362889 2.926624 1.92239 2.926624C3.385702 2.926624 3.988242 .30127 4.146051-.41604C4.404282-1.520697 5.107246-5.336785 5.178977-5.767171H6.398403Z'/>
<path id='g1-108' d='M3.643934-9.597605C3.65828-9.65499 3.686972-9.741067 3.686972-9.812798C3.686972-9.95626 3.54351-9.95626 3.514818-9.95626C3.500472-9.95626 2.984009-9.913221 2.725777-9.884529C2.481892-9.870183 2.266699-9.84149 2.008467-9.827144C1.664159-9.798452 1.563735-9.784105 1.563735-9.525874C1.563735-9.382412 1.707197-9.382412 1.850659-9.382412C2.582315-9.382412 2.582315-9.253296 2.582315-9.109834C2.582315-9.052449 2.582315-9.023757 2.510584-8.765526L.731656-1.649813C.688617-1.492004 .659925-1.377235 .659925-1.147696C.659925-.430386 1.190734 .143462 1.92239 .143462C2.395815 .143462 2.711431-.172154 2.94097-.616886C3.184855-1.090311 3.385702-1.994121 3.385702-2.051506C3.385702-2.123237 3.328317-2.180622 3.24224-2.180622C3.113124-2.180622 3.098778-2.108891 3.041393-1.893698C2.783162-.90381 2.52493-.143462 1.951083-.143462C1.520697-.143462 1.520697-.60254 1.520697-.803387C1.520697-.860772 1.520697-1.162042 1.62112-1.563735L3.643934-9.597605Z'/>
<path id='g1-116' d='M2.883585-5.767171H4.203435C4.476013-5.767171 4.619475-5.767171 4.619475-6.025402C4.619475-6.18321 4.533398-6.18321 4.246474-6.18321H2.984009L3.514818-8.277755C3.572203-8.478602 3.572203-8.507294 3.572203-8.607717C3.572203-8.837257 3.385702-8.966372 3.199202-8.966372C3.084432-8.966372 2.75447-8.923334 2.6397-8.464255L2.080198-6.18321H.731656C.444732-6.18321 .315616-6.18321 .315616-5.910633C.315616-5.767171 .41604-5.767171 .688617-5.767171H1.965429L1.01858-1.979775C.90381-1.477658 .860772-1.334196 .860772-1.147696C.860772-.473424 1.334196 .143462 2.137583 .143462C3.586549 .143462 4.361243-1.951083 4.361243-2.051506C4.361243-2.137583 4.303859-2.180622 4.217782-2.180622C4.189089-2.180622 4.131704-2.180622 4.103012-2.123237C4.088666-2.108891 4.07432-2.094545 3.973896-1.865005C3.672626-1.147696 3.012701-.143462 2.180622-.143462C1.750236-.143462 1.721543-.502117 1.721543-.817733C1.721543-.832079 1.721543-1.104657 1.764582-1.276811L2.883585-5.767171Z'/>
<path id='g1-120' d='M6.800097-5.853248C6.341018-5.767171 6.168864-5.422862 6.168864-5.150284C6.168864-4.805976 6.441442-4.691206 6.642289-4.691206C7.072674-4.691206 7.373945-5.064207 7.373945-5.451554C7.373945-6.054095 6.685327-6.326672 6.082787-6.326672C5.207669-6.326672 4.719898-5.465901 4.590783-5.193323C4.26082-6.269288 3.371356-6.326672 3.113124-6.326672C1.649813-6.326672 .875118-4.447321 .875118-4.131704C.875118-4.07432 .932503-4.002589 1.032926-4.002589C1.147696-4.002589 1.176388-4.088666 1.20508-4.146051C1.692851-5.738478 2.654046-6.039748 3.070086-6.039748C3.715665-6.039748 3.84478-5.437208 3.84478-5.092899C3.84478-4.777283 3.758703-4.447321 3.586549-3.758703L3.098778-1.793274C2.883585-.932503 2.467546-.143462 1.707197-.143462C1.635466-.143462 1.276811-.143462 .975541-.329963C1.492004-.430386 1.606774-.860772 1.606774-1.032926C1.606774-1.31985 1.391581-1.492004 1.119003-1.492004C.774695-1.492004 .401693-1.190734 .401693-.731656C.401693-.129116 1.075965 .143462 1.692851 .143462C2.381468 .143462 2.869239-.401693 3.170509-.989888C3.400048-.143462 4.117358 .143462 4.648167 .143462C6.111479 .143462 6.886174-1.73589 6.886174-2.051506C6.886174-2.123237 6.828789-2.180622 6.742712-2.180622C6.613596-2.180622 6.59925-2.108891 6.556211-1.994121C6.168864-.731656 5.336785-.143462 4.691206-.143462C4.189089-.143462 3.916511-.516463 3.916511-1.104657C3.916511-1.420273 3.973896-1.649813 4.203435-2.596661L4.705552-4.547744C4.920745-5.408516 5.408516-6.039748 6.068441-6.039748C6.097133-6.039748 6.498827-6.039748 6.800097-5.853248Z'/>
<path id='g1-122' d='M1.821967-1.162042C2.438853-1.865005 2.94097-2.309738 3.65828-2.955316C4.519052-3.701318 4.892053-4.059973 5.092899-4.275166C6.097133-5.265054 6.59925-6.097133 6.59925-6.211903S6.48448-6.326672 6.455788-6.326672C6.355365-6.326672 6.326672-6.269288 6.254941-6.168864C5.896286-5.551978 5.551978-5.250708 5.178977-5.250708C4.877707-5.250708 4.719898-5.379823 4.447321-5.724132C4.146051-6.082787 3.902165-6.326672 3.486126-6.326672C2.438853-6.326672 1.807621-5.021168 1.807621-4.719898C1.807621-4.67686 1.821967-4.590783 1.951083-4.590783C2.065852-4.590783 2.080198-4.648167 2.123237-4.748591C2.367122-5.322439 3.05574-5.422862 3.328317-5.422862C3.629588-5.422862 3.916511-5.322439 4.217782-5.193323C4.762937-4.963784 4.992476-4.963784 5.135938-4.963784C5.236361-4.963784 5.293746-4.963784 5.365477-4.97813C4.892053-4.418628 4.117358-3.730011 3.471779-3.141817L2.022814-1.807621C1.147696-.918157 .616886-.071731 .616886 .028692C.616886 .11477 .688617 .143462 .774695 .143462S.875118 .129116 .975541-.043039C1.20508-.401693 1.664159-.932503 2.194968-.932503C2.496238-.932503 2.6397-.832079 2.926624-.473424C3.199202-.157808 3.443087 .143462 3.902165 .143462C5.308092 .143462 6.111479-1.678505 6.111479-2.008467C6.111479-2.065852 6.097133-2.151929 5.953671-2.151929C5.838902-2.151929 5.824555-2.094545 5.781517-1.951083C5.465901-1.104657 4.619475-.760348 4.059973-.760348C3.758703-.760348 3.471779-.860772 3.170509-.989888C2.596661-1.219427 2.438853-1.219427 2.252353-1.219427C2.108891-1.219427 1.951083-1.219427 1.821967-1.162042Z'/>
</defs>
<g id='page1' transform='matrix(1.13 0 0 1.13 -65.34204 -63.336044)'>
<use x='58.316059' y='62.166868' xlink:href='#g1-122'/>
<use x='68.668786' y='62.166868' xlink:href='#g0-0'/>
<use x='83.014974' y='62.166868' xlink:href='#g1-120'/>
<rect x='57.608781' y='67.998713' height='.573822' width='34.095926'/>
<use x='57.608781' y='81.71294' xlink:href='#g1-108'/>
<use x='62.108534' y='81.71294' xlink:href='#g1-101'/>
<use x='68.619059' y='81.71294' xlink:href='#g1-102'/>
<use x='77.074774' y='81.71294' xlink:href='#g1-116'/>
<use x='82.147364' y='81.71294' xlink:href='#g1-76'/>
<use x='96.088217' y='71.872172' xlink:href='#g2-43'/>
<use x='110.20179' y='71.872172' xlink:href='#g2-49'/>
</g>
</svg></p>
<p>And the right: <?xml version='1.0' encoding='UTF-8'?>
<!-- Generated by CodeCogs with dvisvgm 2.9.1 -->
<svg class="svg-image" version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='76.824134pt' height='37.55253pt' viewBox='-.244117 -.22797 76.824134 37.55253'>
<defs>
<path id='g0-0' d='M9.454143-3.299625C9.698028-3.299625 9.95626-3.299625 9.95626-3.586549S9.698028-3.873473 9.454143-3.873473H1.692851C1.448966-3.873473 1.190734-3.873473 1.190734-3.586549S1.448966-3.299625 1.692851-3.299625H9.454143Z'/>
<path id='g1-76' d='M5.265054-8.693795C5.39417-9.23895 5.437208-9.382412 6.699673-9.382412C7.087021-9.382412 7.187444-9.382412 7.187444-9.65499C7.187444-9.798452 7.029636-9.798452 6.972251-9.798452C6.685327-9.798452 6.355365-9.769759 6.068441-9.769759H4.146051C3.873473-9.769759 3.557857-9.798452 3.285279-9.798452C3.170509-9.798452 3.012701-9.798452 3.012701-9.525874C3.012701-9.382412 3.141817-9.382412 3.35701-9.382412C4.232128-9.382412 4.232128-9.267642 4.232128-9.109834C4.232128-9.081142 4.232128-8.995065 4.174743-8.779872L2.238007-1.061618C2.108891-.559502 2.080198-.41604 1.075965-.41604C.803387-.41604 .659925-.41604 .659925-.157808C.659925 0 .746002 0 1.032926 0H7.460022C7.775638 0 7.789984-.014346 7.890408-.272578L8.995065-3.328317C9.023757-3.400048 9.052449-3.486126 9.052449-3.529164C9.052449-3.615241 8.980718-3.672626 8.908988-3.672626C8.894641-3.672626 8.82291-3.672626 8.794218-3.615241C8.765526-3.600895 8.765526-3.572203 8.650756-3.299625C8.191678-2.03716 7.546099-.41604 5.121592-.41604H3.744357C3.54351-.41604 3.514818-.41604 3.428741-.430386C3.270933-.444732 3.256586-.473424 3.256586-.588194C3.256586-.688617 3.285279-.774695 3.313971-.90381L5.265054-8.693795Z'/>
<path id='g1-103' d='M4.849014-1.821967C4.791629-1.592428 4.762937-1.535043 4.576436-1.31985C3.988242-.559502 3.385702-.286924 2.94097-.286924C2.467546-.286924 2.022814-.659925 2.022814-1.649813C2.022814-2.410161 2.453199-4.016935 2.768816-4.662514C3.184855-5.465901 3.830434-6.039748 4.432974-6.039748C5.379823-6.039748 5.566324-4.86336 5.566324-4.777283L5.523285-4.576436L4.849014-1.821967ZM5.738478-5.379823C5.551978-5.795863 5.150284-6.326672 4.432974-6.326672C2.869239-6.326672 1.090311-4.361243 1.090311-2.22366C1.090311-.731656 1.994121 0 2.912278 0C3.672626 0 4.346897-.60254 4.605129-.889464L4.289513 .401693C4.088666 1.190734 4.002589 1.549389 3.486126 2.051506C2.897932 2.6397 2.352776 2.6397 2.03716 2.6397C1.606774 2.6397 1.248119 2.611008 .889464 2.496238C1.348542 2.367122 1.463312 1.965429 1.463312 1.807621C1.463312 1.578082 1.291158 1.348542 .975541 1.348542C.631233 1.348542 .258232 1.635466 .258232 2.108891C.258232 2.697085 .846426 2.926624 2.065852 2.926624C3.916511 2.926624 4.877707 1.73589 5.064207 .961195L6.656635-5.465901C6.699673-5.638055 6.699673-5.666747 6.699673-5.69544C6.699673-5.896286 6.541865-6.054095 6.326672-6.054095C5.982364-6.054095 5.781517-5.767171 5.738478-5.379823Z'/>
<path id='g1-104' d='M4.031281-9.597605C4.045627-9.65499 4.07432-9.741067 4.07432-9.812798C4.07432-9.95626 3.930858-9.95626 3.902165-9.95626C3.887819-9.95626 3.184855-9.898875 3.113124-9.884529C2.869239-9.870183 2.654046-9.84149 2.395815-9.827144C2.03716-9.798452 1.936736-9.784105 1.936736-9.525874C1.936736-9.382412 2.051506-9.382412 2.252353-9.382412C2.955316-9.382412 2.969663-9.253296 2.969663-9.109834C2.969663-9.023757 2.94097-8.908988 2.926624-8.865949L.846426-.559502C.789041-.344309 .789041-.315616 .789041-.229539C.789041 .086077 1.032926 .143462 1.176388 .143462C1.420273 .143462 1.606774-.043039 1.678505-.200847L2.324084-2.797508C2.395815-3.113124 2.481892-3.414395 2.553623-3.730011C2.711431-4.332551 2.711431-4.346897 2.984009-4.762937S3.902165-6.039748 5.006822-6.039748C5.58067-6.039748 5.781517-5.609363 5.781517-5.035515C5.781517-4.232128 5.222015-2.668392 4.906399-1.807621C4.777283-1.463312 4.705552-1.276811 4.705552-1.01858C4.705552-.373001 5.150284 .143462 5.838902 .143462C7.173098 .143462 7.675215-1.965429 7.675215-2.051506C7.675215-2.123237 7.61783-2.180622 7.531753-2.180622C7.402637-2.180622 7.388291-2.137583 7.31656-1.893698C6.986597-.746002 6.455788-.143462 5.88194-.143462C5.738478-.143462 5.508939-.157808 5.508939-.616886C5.508939-.989888 5.681093-1.448966 5.738478-1.606774C5.99671-2.295391 6.642289-3.988242 6.642289-4.820322C6.642289-5.681093 6.140172-6.326672 5.049861-6.326672C4.232128-6.326672 3.514818-5.939325 2.926624-5.193323L4.031281-9.597605Z'/>
<path id='g1-105' d='M4.059973-2.051506C4.059973-2.123237 4.002589-2.180622 3.916511-2.180622C3.787396-2.180622 3.773049-2.137583 3.701318-1.893698C3.328317-.588194 2.740123-.143462 2.266699-.143462C2.094545-.143462 1.893698-.186501 1.893698-.616886C1.893698-1.004234 2.065852-1.43462 2.22366-1.865005L3.227894-4.533398C3.270933-4.648167 3.371356-4.906399 3.371356-5.178977C3.371356-5.781517 2.94097-6.326672 2.238007-6.326672C.918157-6.326672 .387347-4.246474 .387347-4.131704C.387347-4.07432 .444732-4.002589 .545155-4.002589C.674271-4.002589 .688617-4.059973 .746002-4.26082C1.090311-5.465901 1.635466-6.039748 2.194968-6.039748C2.324084-6.039748 2.567969-6.025402 2.567969-5.566324C2.567969-5.193323 2.381468-4.719898 2.266699-4.404282L1.262465-1.73589C1.176388-1.506351 1.090311-1.276811 1.090311-1.01858C1.090311-.373001 1.535043 .143462 2.22366 .143462C3.54351 .143462 4.059973-1.951083 4.059973-2.051506ZM3.945204-8.952026C3.945204-9.167219 3.773049-9.425451 3.457433-9.425451C3.127471-9.425451 2.75447-9.109834 2.75447-8.736833C2.75447-8.378178 3.05574-8.263409 3.227894-8.263409C3.615241-8.263409 3.945204-8.63641 3.945204-8.952026Z'/>
<path id='g1-114' d='M5.58067-5.867594C5.135938-5.781517 4.906399-5.465901 4.906399-5.150284C4.906399-4.805976 5.178977-4.691206 5.379823-4.691206C5.781517-4.691206 6.111479-5.035515 6.111479-5.465901C6.111479-5.924979 5.666747-6.326672 4.949438-6.326672C4.37559-6.326672 3.715665-6.068441 3.113124-5.193323C3.012701-5.953671 2.438853-6.326672 1.865005-6.326672C1.305504-6.326672 1.01858-5.896286 .846426-5.58067C.60254-5.064207 .387347-4.203435 .387347-4.131704C.387347-4.07432 .444732-4.002589 .545155-4.002589C.659925-4.002589 .674271-4.016935 .760348-4.346897C.975541-5.207669 1.248119-6.039748 1.821967-6.039748C2.166276-6.039748 2.266699-5.795863 2.266699-5.379823C2.266699-5.064207 2.123237-4.504705 2.022814-4.059973L1.62112-2.510584C1.563735-2.238007 1.405927-1.592428 1.334196-1.334196C1.233773-.961195 1.075965-.286924 1.075965-.215193C1.075965-.014346 1.233773 .143462 1.448966 .143462C1.606774 .143462 1.879352 .043039 1.965429-.243885C2.008467-.358655 2.539277-2.52493 2.625354-2.854893C2.697085-3.170509 2.783162-3.471779 2.854893-3.787396C2.912278-3.988242 2.969663-4.217782 3.012701-4.404282C3.05574-4.533398 3.443087-5.236361 3.801742-5.551978C3.973896-5.709786 4.346897-6.039748 4.935091-6.039748C5.16463-6.039748 5.39417-5.99671 5.58067-5.867594Z'/>
<path id='g1-116' d='M2.883585-5.767171H4.203435C4.476013-5.767171 4.619475-5.767171 4.619475-6.025402C4.619475-6.18321 4.533398-6.18321 4.246474-6.18321H2.984009L3.514818-8.277755C3.572203-8.478602 3.572203-8.507294 3.572203-8.607717C3.572203-8.837257 3.385702-8.966372 3.199202-8.966372C3.084432-8.966372 2.75447-8.923334 2.6397-8.464255L2.080198-6.18321H.731656C.444732-6.18321 .315616-6.18321 .315616-5.910633C.315616-5.767171 .41604-5.767171 .688617-5.767171H1.965429L1.01858-1.979775C.90381-1.477658 .860772-1.334196 .860772-1.147696C.860772-.473424 1.334196 .143462 2.137583 .143462C3.586549 .143462 4.361243-1.951083 4.361243-2.051506C4.361243-2.137583 4.303859-2.180622 4.217782-2.180622C4.189089-2.180622 4.131704-2.180622 4.103012-2.123237C4.088666-2.108891 4.07432-2.094545 3.973896-1.865005C3.672626-1.147696 3.012701-.143462 2.180622-.143462C1.750236-.143462 1.721543-.502117 1.721543-.817733C1.721543-.832079 1.721543-1.104657 1.764582-1.276811L2.883585-5.767171Z'/>
<path id='g1-120' d='M6.800097-5.853248C6.341018-5.767171 6.168864-5.422862 6.168864-5.150284C6.168864-4.805976 6.441442-4.691206 6.642289-4.691206C7.072674-4.691206 7.373945-5.064207 7.373945-5.451554C7.373945-6.054095 6.685327-6.326672 6.082787-6.326672C5.207669-6.326672 4.719898-5.465901 4.590783-5.193323C4.26082-6.269288 3.371356-6.326672 3.113124-6.326672C1.649813-6.326672 .875118-4.447321 .875118-4.131704C.875118-4.07432 .932503-4.002589 1.032926-4.002589C1.147696-4.002589 1.176388-4.088666 1.20508-4.146051C1.692851-5.738478 2.654046-6.039748 3.070086-6.039748C3.715665-6.039748 3.84478-5.437208 3.84478-5.092899C3.84478-4.777283 3.758703-4.447321 3.586549-3.758703L3.098778-1.793274C2.883585-.932503 2.467546-.143462 1.707197-.143462C1.635466-.143462 1.276811-.143462 .975541-.329963C1.492004-.430386 1.606774-.860772 1.606774-1.032926C1.606774-1.31985 1.391581-1.492004 1.119003-1.492004C.774695-1.492004 .401693-1.190734 .401693-.731656C.401693-.129116 1.075965 .143462 1.692851 .143462C2.381468 .143462 2.869239-.401693 3.170509-.989888C3.400048-.143462 4.117358 .143462 4.648167 .143462C6.111479 .143462 6.886174-1.73589 6.886174-2.051506C6.886174-2.123237 6.828789-2.180622 6.742712-2.180622C6.613596-2.180622 6.59925-2.108891 6.556211-1.994121C6.168864-.731656 5.336785-.143462 4.691206-.143462C4.189089-.143462 3.916511-.516463 3.916511-1.104657C3.916511-1.420273 3.973896-1.649813 4.203435-2.596661L4.705552-4.547744C4.920745-5.408516 5.408516-6.039748 6.068441-6.039748C6.097133-6.039748 6.498827-6.039748 6.800097-5.853248Z'/>
<path id='g1-122' d='M1.821967-1.162042C2.438853-1.865005 2.94097-2.309738 3.65828-2.955316C4.519052-3.701318 4.892053-4.059973 5.092899-4.275166C6.097133-5.265054 6.59925-6.097133 6.59925-6.211903S6.48448-6.326672 6.455788-6.326672C6.355365-6.326672 6.326672-6.269288 6.254941-6.168864C5.896286-5.551978 5.551978-5.250708 5.178977-5.250708C4.877707-5.250708 4.719898-5.379823 4.447321-5.724132C4.146051-6.082787 3.902165-6.326672 3.486126-6.326672C2.438853-6.326672 1.807621-5.021168 1.807621-4.719898C1.807621-4.67686 1.821967-4.590783 1.951083-4.590783C2.065852-4.590783 2.080198-4.648167 2.123237-4.748591C2.367122-5.322439 3.05574-5.422862 3.328317-5.422862C3.629588-5.422862 3.916511-5.322439 4.217782-5.193323C4.762937-4.963784 4.992476-4.963784 5.135938-4.963784C5.236361-4.963784 5.293746-4.963784 5.365477-4.97813C4.892053-4.418628 4.117358-3.730011 3.471779-3.141817L2.022814-1.807621C1.147696-.918157 .616886-.071731 .616886 .028692C.616886 .11477 .688617 .143462 .774695 .143462S.875118 .129116 .975541-.043039C1.20508-.401693 1.664159-.932503 2.194968-.932503C2.496238-.932503 2.6397-.832079 2.926624-.473424C3.199202-.157808 3.443087 .143462 3.902165 .143462C5.308092 .143462 6.111479-1.678505 6.111479-2.008467C6.111479-2.065852 6.097133-2.151929 5.953671-2.151929C5.838902-2.151929 5.824555-2.094545 5.781517-1.951083C5.465901-1.104657 4.619475-.760348 4.059973-.760348C3.758703-.760348 3.471779-.860772 3.170509-.989888C2.596661-1.219427 2.438853-1.219427 2.252353-1.219427C2.108891-1.219427 1.951083-1.219427 1.821967-1.162042Z'/>
<path id='g2-40' d='M4.662514 3.486126C4.662514 3.443087 4.662514 3.414395 4.418628 3.170509C2.984009 1.721543 2.180622-.645579 2.180622-3.572203C2.180622-6.355365 2.854893-8.751179 4.519052-10.44403C4.662514-10.573146 4.662514-10.601839 4.662514-10.644877C4.662514-10.730954 4.590783-10.759647 4.533398-10.759647C4.346897-10.759647 3.170509-9.726721 2.467546-8.320793C1.73589-6.871828 1.405927-5.336785 1.405927-3.572203C1.405927-2.295391 1.606774-.588194 2.352776 .946849C3.199202 2.668392 4.37559 3.600895 4.533398 3.600895C4.590783 3.600895 4.662514 3.572203 4.662514 3.486126Z'/>
<path id='g2-41' d='M4.045627-3.572203C4.045627-4.662514 3.902165-6.441442 3.098778-8.105601C2.252353-9.827144 1.075965-10.759647 .918157-10.759647C.860772-10.759647 .789041-10.730954 .789041-10.644877C.789041-10.601839 .789041-10.573146 1.032926-10.329261C2.467546-8.880295 3.270933-6.513173 3.270933-3.586549C3.270933-.803387 2.596661 1.592428 .932503 3.285279C.789041 3.414395 .789041 3.443087 .789041 3.486126C.789041 3.572203 .860772 3.600895 .918157 3.600895C1.104657 3.600895 2.281045 2.567969 2.984009 1.162042C3.715665-.30127 4.045627-1.850659 4.045627-3.572203Z'/>
<path id='g2-43' d='M5.724132-3.313971H9.683682C9.884529-3.313971 10.14276-3.313971 10.14276-3.572203C10.14276-3.84478 9.898875-3.84478 9.683682-3.84478H5.724132V-7.80433C5.724132-8.005177 5.724132-8.263409 5.465901-8.263409C5.193323-8.263409 5.193323-8.019523 5.193323-7.80433V-3.84478H1.233773C1.032926-3.84478 .774695-3.84478 .774695-3.586549C.774695-3.313971 1.01858-3.313971 1.233773-3.313971H5.193323V.645579C5.193323 .846426 5.193323 1.104657 5.451554 1.104657C5.724132 1.104657 5.724132 .860772 5.724132 .645579V-3.313971Z'/>
<path id='g2-49' d='M4.131704-9.195911C4.131704-9.525874 4.131704-9.54022 3.84478-9.54022C3.500472-9.152873 2.783162-8.622064 1.305504-8.622064V-8.206024C1.635466-8.206024 2.352776-8.206024 3.141817-8.579025V-1.104657C3.141817-.588194 3.098778-.41604 1.836313-.41604H1.391581V0C1.778928-.028692 3.170509-.028692 3.643934-.028692S5.494593-.028692 5.88194 0V-.41604H5.437208C4.174743-.41604 4.131704-.588194 4.131704-1.104657V-9.195911Z'/>
</defs>
<g id='page1' transform='matrix(1.13 0 0 1.13 -65.34204 -61.019991)'>
<use x='57.608781' y='64.557896' xlink:href='#g2-40'/>
<use x='63.071557' y='64.55788' xlink:href='#g1-120'/>
<use x='74.242054' y='64.55788' xlink:href='#g0-0'/>
<use x='88.588242' y='64.55788' xlink:href='#g1-122'/>
<use x='95.752973' y='64.557896' xlink:href='#g2-41'/>
<rect x='57.608781' y='70.389725' height='.573822' width='43.606936'/>
<use x='58.677269' y='84.103952' xlink:href='#g1-114'/>
<use x='65.397819' y='84.103952' xlink:href='#g1-105'/>
<use x='70.189935' y='84.103952' xlink:href='#g1-103'/>
<use x='77.431034' y='84.103952' xlink:href='#g1-104'/>
<use x='85.517297' y='84.103952' xlink:href='#g1-116'/>
<use x='90.589886' y='84.103952' xlink:href='#g1-76'/>
<use x='105.599227' y='74.263185' xlink:href='#g2-43'/>
<use x='119.7128' y='74.263185' xlink:href='#g2-49'/>
</g>
</svg></p>
<p>And to combine them to get the final equation we use min(). Because the point that these lines cross is right above the position of the comet we can use min to get the parts of the lines that make our fade curve.</p>
<p><?xml version='1.0' encoding='UTF-8'?>
<!-- Generated by CodeCogs with dvisvgm 2.9.1 -->
<svg class="svg-image" version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='207.247026pt' height='38.890671pt' viewBox='-.239051 -.22797 207.247026 38.890671'>
<defs>
<path id='g3-40' d='M4.662514 3.486126C4.662514 3.443087 4.662514 3.414395 4.418628 3.170509C2.984009 1.721543 2.180622-.645579 2.180622-3.572203C2.180622-6.355365 2.854893-8.751179 4.519052-10.44403C4.662514-10.573146 4.662514-10.601839 4.662514-10.644877C4.662514-10.730954 4.590783-10.759647 4.533398-10.759647C4.346897-10.759647 3.170509-9.726721 2.467546-8.320793C1.73589-6.871828 1.405927-5.336785 1.405927-3.572203C1.405927-2.295391 1.606774-.588194 2.352776 .946849C3.199202 2.668392 4.37559 3.600895 4.533398 3.600895C4.590783 3.600895 4.662514 3.572203 4.662514 3.486126Z'/>
<path id='g3-41' d='M4.045627-3.572203C4.045627-4.662514 3.902165-6.441442 3.098778-8.105601C2.252353-9.827144 1.075965-10.759647 .918157-10.759647C.860772-10.759647 .789041-10.730954 .789041-10.644877C.789041-10.601839 .789041-10.573146 1.032926-10.329261C2.467546-8.880295 3.270933-6.513173 3.270933-3.586549C3.270933-.803387 2.596661 1.592428 .932503 3.285279C.789041 3.414395 .789041 3.443087 .789041 3.486126C.789041 3.572203 .860772 3.600895 .918157 3.600895C1.104657 3.600895 2.281045 2.567969 2.984009 1.162042C3.715665-.30127 4.045627-1.850659 4.045627-3.572203Z'/>
<path id='g3-43' d='M5.724132-3.313971H9.683682C9.884529-3.313971 10.14276-3.313971 10.14276-3.572203C10.14276-3.84478 9.898875-3.84478 9.683682-3.84478H5.724132V-7.80433C5.724132-8.005177 5.724132-8.263409 5.465901-8.263409C5.193323-8.263409 5.193323-8.019523 5.193323-7.80433V-3.84478H1.233773C1.032926-3.84478 .774695-3.84478 .774695-3.586549C.774695-3.313971 1.01858-3.313971 1.233773-3.313971H5.193323V.645579C5.193323 .846426 5.193323 1.104657 5.451554 1.104657C5.724132 1.104657 5.724132 .860772 5.724132 .645579V-3.313971Z'/>
<path id='g3-49' d='M4.131704-9.195911C4.131704-9.525874 4.131704-9.54022 3.84478-9.54022C3.500472-9.152873 2.783162-8.622064 1.305504-8.622064V-8.206024C1.635466-8.206024 2.352776-8.206024 3.141817-8.579025V-1.104657C3.141817-.588194 3.098778-.41604 1.836313-.41604H1.391581V0C1.778928-.028692 3.170509-.028692 3.643934-.028692S5.494593-.028692 5.88194 0V-.41604H5.437208C4.174743-.41604 4.131704-.588194 4.131704-1.104657V-9.195911Z'/>
<path id='g1-0' d='M9.454143-3.299625C9.698028-3.299625 9.95626-3.299625 9.95626-3.586549S9.698028-3.873473 9.454143-3.873473H1.692851C1.448966-3.873473 1.190734-3.873473 1.190734-3.586549S1.448966-3.299625 1.692851-3.299625H9.454143Z'/>
<path id='g0-18' d='M10.042337 33.699214C10.042337 33.641829 10.013645 33.613136 9.984952 33.570098C9.454143 33.039289 8.492948 32.078094 7.531753 30.528704C5.222015 26.827386 4.174743 22.164872 4.174743 16.641587C4.174743 12.78246 4.691206 7.80433 7.058328 3.529164C8.191678 1.492004 9.368066 .315616 9.999298-.315616C10.042337-.358655 10.042337-.387347 10.042337-.430386C10.042337-.573848 9.941914-.573848 9.741067-.573848S9.511528-.573848 9.296335-.358655C4.490359 4.016935 2.984009 10.587492 2.984009 16.627241C2.984009 22.265296 4.275166 27.946389 7.9191 32.235902C8.206024 32.565864 8.751179 33.154058 9.339373 33.670521C9.511528 33.842676 9.54022 33.842676 9.741067 33.842676S10.042337 33.842676 10.042337 33.699214Z'/>
<path id='g0-19' d='M7.560445 16.641587C7.560445 11.003532 6.269288 5.322439 2.625354 1.032926C2.33843 .702964 1.793274 .11477 1.20508-.401693C1.032926-.573848 1.004234-.573848 .803387-.573848C.631233-.573848 .502117-.573848 .502117-.430386C.502117-.373001 .559502-.315616 .588194-.286924C1.090311 .229539 2.051506 1.190734 3.012701 2.740123C5.322439 6.441442 6.369711 11.103955 6.369711 16.627241C6.369711 20.486367 5.853248 25.464497 3.486126 29.739664C2.352776 31.776823 1.162042 32.967558 .559502 33.570098C.530809 33.613136 .502117 33.656175 .502117 33.699214C.502117 33.842676 .631233 33.842676 .803387 33.842676C1.004234 33.842676 1.032926 33.842676 1.248119 33.627483C6.054095 29.251893 7.560445 22.681335 7.560445 16.641587Z'/>
<path id='g2-59' d='M2.797508 .057385C2.797508-.774695 2.52493-1.391581 1.936736-1.391581C1.477658-1.391581 1.248119-1.01858 1.248119-.702964S1.463312 0 1.951083 0C2.137583 0 2.295391-.057385 2.424507-.186501C2.453199-.215193 2.467546-.215193 2.481892-.215193C2.510584-.215193 2.510584-.014346 2.510584 .057385C2.510584 .530809 2.424507 1.463312 1.592428 2.395815C1.43462 2.567969 1.43462 2.596661 1.43462 2.625354C1.43462 2.697085 1.506351 2.768816 1.578082 2.768816C1.692851 2.768816 2.797508 1.707197 2.797508 .057385Z'/>
<path id='g2-76' d='M5.265054-8.693795C5.39417-9.23895 5.437208-9.382412 6.699673-9.382412C7.087021-9.382412 7.187444-9.382412 7.187444-9.65499C7.187444-9.798452 7.029636-9.798452 6.972251-9.798452C6.685327-9.798452 6.355365-9.769759 6.068441-9.769759H4.146051C3.873473-9.769759 3.557857-9.798452 3.285279-9.798452C3.170509-9.798452 3.012701-9.798452 3.012701-9.525874C3.012701-9.382412 3.141817-9.382412 3.35701-9.382412C4.232128-9.382412 4.232128-9.267642 4.232128-9.109834C4.232128-9.081142 4.232128-8.995065 4.174743-8.779872L2.238007-1.061618C2.108891-.559502 2.080198-.41604 1.075965-.41604C.803387-.41604 .659925-.41604 .659925-.157808C.659925 0 .746002 0 1.032926 0H7.460022C7.775638 0 7.789984-.014346 7.890408-.272578L8.995065-3.328317C9.023757-3.400048 9.052449-3.486126 9.052449-3.529164C9.052449-3.615241 8.980718-3.672626 8.908988-3.672626C8.894641-3.672626 8.82291-3.672626 8.794218-3.615241C8.765526-3.600895 8.765526-3.572203 8.650756-3.299625C8.191678-2.03716 7.546099-.41604 5.121592-.41604H3.744357C3.54351-.41604 3.514818-.41604 3.428741-.430386C3.270933-.444732 3.256586-.473424 3.256586-.588194C3.256586-.688617 3.285279-.774695 3.313971-.90381L5.265054-8.693795Z'/>
<path id='g2-101' d='M2.567969-3.328317C2.955316-3.328317 3.930858-3.35701 4.619475-3.615241C5.709786-4.031281 5.810209-4.86336 5.810209-5.121592C5.810209-5.752824 5.265054-6.326672 4.318205-6.326672C2.811854-6.326672 .645579-4.963784 .645579-2.410161C.645579-.90381 1.506351 .143462 2.811854 .143462C4.762937 .143462 5.99671-1.377235 5.99671-1.563735C5.99671-1.649813 5.910633-1.721543 5.853248-1.721543C5.810209-1.721543 5.795863-1.707197 5.666747-1.578082C4.748591-.358655 3.385702-.143462 2.840547-.143462C2.022814-.143462 1.592428-.789041 1.592428-1.850659C1.592428-2.051506 1.592428-2.410161 1.807621-3.328317H2.567969ZM1.879352-3.615241C2.496238-5.824555 3.859127-6.039748 4.318205-6.039748C4.949438-6.039748 5.379823-5.666747 5.379823-5.121592C5.379823-3.615241 3.084432-3.615241 2.481892-3.615241H1.879352Z'/>
<path id='g2-102' d='M6.398403-5.767171C6.685327-5.767171 6.800097-5.767171 6.800097-6.039748C6.800097-6.18321 6.685327-6.18321 6.427096-6.18321H5.265054C5.537632-7.660868 5.738478-8.679448 5.853248-9.138527C5.939325-9.482835 6.240595-9.812798 6.613596-9.812798C6.914866-9.812798 7.216136-9.683682 7.359598-9.554566C6.800097-9.497182 6.627942-9.081142 6.627942-8.837257C6.627942-8.550333 6.843135-8.378178 7.115713-8.378178C7.402637-8.378178 7.833023-8.622064 7.833023-9.167219C7.833023-9.769759 7.230483-10.099722 6.59925-10.099722C5.982364-10.099722 5.379823-9.640643 5.092899-9.081142C4.834668-8.579025 4.691206-8.062562 4.361243-6.18321H3.400048C3.127471-6.18321 2.984009-6.18321 2.984009-5.924979C2.984009-5.767171 3.070086-5.767171 3.35701-5.767171H4.275166C4.016935-4.432974 3.428741-1.190734 3.098778 .344309C2.854893 1.592428 2.6397 2.6397 1.92239 2.6397C1.879352 2.6397 1.463312 2.6397 1.20508 2.367122C1.936736 2.309738 1.936736 1.678505 1.936736 1.664159C1.936736 1.377235 1.721543 1.20508 1.448966 1.20508C1.162042 1.20508 .731656 1.448966 .731656 1.994121C.731656 2.611008 1.362889 2.926624 1.92239 2.926624C3.385702 2.926624 3.988242 .30127 4.146051-.41604C4.404282-1.520697 5.107246-5.336785 5.178977-5.767171H6.398403Z'/>
<path id='g2-103' d='M4.849014-1.821967C4.791629-1.592428 4.762937-1.535043 4.576436-1.31985C3.988242-.559502 3.385702-.286924 2.94097-.286924C2.467546-.286924 2.022814-.659925 2.022814-1.649813C2.022814-2.410161 2.453199-4.016935 2.768816-4.662514C3.184855-5.465901 3.830434-6.039748 4.432974-6.039748C5.379823-6.039748 5.566324-4.86336 5.566324-4.777283L5.523285-4.576436L4.849014-1.821967ZM5.738478-5.379823C5.551978-5.795863 5.150284-6.326672 4.432974-6.326672C2.869239-6.326672 1.090311-4.361243 1.090311-2.22366C1.090311-.731656 1.994121 0 2.912278 0C3.672626 0 4.346897-.60254 4.605129-.889464L4.289513 .401693C4.088666 1.190734 4.002589 1.549389 3.486126 2.051506C2.897932 2.6397 2.352776 2.6397 2.03716 2.6397C1.606774 2.6397 1.248119 2.611008 .889464 2.496238C1.348542 2.367122 1.463312 1.965429 1.463312 1.807621C1.463312 1.578082 1.291158 1.348542 .975541 1.348542C.631233 1.348542 .258232 1.635466 .258232 2.108891C.258232 2.697085 .846426 2.926624 2.065852 2.926624C3.916511 2.926624 4.877707 1.73589 5.064207 .961195L6.656635-5.465901C6.699673-5.638055 6.699673-5.666747 6.699673-5.69544C6.699673-5.896286 6.541865-6.054095 6.326672-6.054095C5.982364-6.054095 5.781517-5.767171 5.738478-5.379823Z'/>
<path id='g2-104' d='M4.031281-9.597605C4.045627-9.65499 4.07432-9.741067 4.07432-9.812798C4.07432-9.95626 3.930858-9.95626 3.902165-9.95626C3.887819-9.95626 3.184855-9.898875 3.113124-9.884529C2.869239-9.870183 2.654046-9.84149 2.395815-9.827144C2.03716-9.798452 1.936736-9.784105 1.936736-9.525874C1.936736-9.382412 2.051506-9.382412 2.252353-9.382412C2.955316-9.382412 2.969663-9.253296 2.969663-9.109834C2.969663-9.023757 2.94097-8.908988 2.926624-8.865949L.846426-.559502C.789041-.344309 .789041-.315616 .789041-.229539C.789041 .086077 1.032926 .143462 1.176388 .143462C1.420273 .143462 1.606774-.043039 1.678505-.200847L2.324084-2.797508C2.395815-3.113124 2.481892-3.414395 2.553623-3.730011C2.711431-4.332551 2.711431-4.346897 2.984009-4.762937S3.902165-6.039748 5.006822-6.039748C5.58067-6.039748 5.781517-5.609363 5.781517-5.035515C5.781517-4.232128 5.222015-2.668392 4.906399-1.807621C4.777283-1.463312 4.705552-1.276811 4.705552-1.01858C4.705552-.373001 5.150284 .143462 5.838902 .143462C7.173098 .143462 7.675215-1.965429 7.675215-2.051506C7.675215-2.123237 7.61783-2.180622 7.531753-2.180622C7.402637-2.180622 7.388291-2.137583 7.31656-1.893698C6.986597-.746002 6.455788-.143462 5.88194-.143462C5.738478-.143462 5.508939-.157808 5.508939-.616886C5.508939-.989888 5.681093-1.448966 5.738478-1.606774C5.99671-2.295391 6.642289-3.988242 6.642289-4.820322C6.642289-5.681093 6.140172-6.326672 5.049861-6.326672C4.232128-6.326672 3.514818-5.939325 2.926624-5.193323L4.031281-9.597605Z'/>
<path id='g2-105' d='M4.059973-2.051506C4.059973-2.123237 4.002589-2.180622 3.916511-2.180622C3.787396-2.180622 3.773049-2.137583 3.701318-1.893698C3.328317-.588194 2.740123-.143462 2.266699-.143462C2.094545-.143462 1.893698-.186501 1.893698-.616886C1.893698-1.004234 2.065852-1.43462 2.22366-1.865005L3.227894-4.533398C3.270933-4.648167 3.371356-4.906399 3.371356-5.178977C3.371356-5.781517 2.94097-6.326672 2.238007-6.326672C.918157-6.326672 .387347-4.246474 .387347-4.131704C.387347-4.07432 .444732-4.002589 .545155-4.002589C.674271-4.002589 .688617-4.059973 .746002-4.26082C1.090311-5.465901 1.635466-6.039748 2.194968-6.039748C2.324084-6.039748 2.567969-6.025402 2.567969-5.566324C2.567969-5.193323 2.381468-4.719898 2.266699-4.404282L1.262465-1.73589C1.176388-1.506351 1.090311-1.276811 1.090311-1.01858C1.090311-.373001 1.535043 .143462 2.22366 .143462C3.54351 .143462 4.059973-1.951083 4.059973-2.051506ZM3.945204-8.952026C3.945204-9.167219 3.773049-9.425451 3.457433-9.425451C3.127471-9.425451 2.75447-9.109834 2.75447-8.736833C2.75447-8.378178 3.05574-8.263409 3.227894-8.263409C3.615241-8.263409 3.945204-8.63641 3.945204-8.952026Z'/>
<path id='g2-108' d='M3.643934-9.597605C3.65828-9.65499 3.686972-9.741067 3.686972-9.812798C3.686972-9.95626 3.54351-9.95626 3.514818-9.95626C3.500472-9.95626 2.984009-9.913221 2.725777-9.884529C2.481892-9.870183 2.266699-9.84149 2.008467-9.827144C1.664159-9.798452 1.563735-9.784105 1.563735-9.525874C1.563735-9.382412 1.707197-9.382412 1.850659-9.382412C2.582315-9.382412 2.582315-9.253296 2.582315-9.109834C2.582315-9.052449 2.582315-9.023757 2.510584-8.765526L.731656-1.649813C.688617-1.492004 .659925-1.377235 .659925-1.147696C.659925-.430386 1.190734 .143462 1.92239 .143462C2.395815 .143462 2.711431-.172154 2.94097-.616886C3.184855-1.090311 3.385702-1.994121 3.385702-2.051506C3.385702-2.123237 3.328317-2.180622 3.24224-2.180622C3.113124-2.180622 3.098778-2.108891 3.041393-1.893698C2.783162-.90381 2.52493-.143462 1.951083-.143462C1.520697-.143462 1.520697-.60254 1.520697-.803387C1.520697-.860772 1.520697-1.162042 1.62112-1.563735L3.643934-9.597605Z'/>
<path id='g2-109' d='M2.955316-4.203435C2.984009-4.289513 3.342664-5.006822 3.873473-5.465901C4.246474-5.810209 4.734245-6.039748 5.293746-6.039748C5.867594-6.039748 6.068441-5.609363 6.068441-5.035515C6.068441-4.949438 6.068441-4.662514 5.896286-3.988242L5.537632-2.510584C5.422862-2.080198 5.150284-1.01858 5.121592-.860772C5.064207-.645579 4.97813-.272578 4.97813-.215193C4.97813-.014346 5.135938 .143462 5.351131 .143462C5.781517 .143462 5.853248-.186501 5.982364-.702964L6.843135-4.131704C6.871828-4.246474 7.61783-6.039748 9.195911-6.039748C9.769759-6.039748 9.970606-5.609363 9.970606-5.035515C9.970606-4.232128 9.411104-2.668392 9.095488-1.807621C8.966372-1.463312 8.894641-1.276811 8.894641-1.01858C8.894641-.373001 9.339373 .143462 10.027991 .143462C11.362187 .143462 11.864304-1.965429 11.864304-2.051506C11.864304-2.123237 11.806919-2.180622 11.720842-2.180622C11.591726-2.180622 11.57738-2.137583 11.505649-1.893698C11.175686-.746002 10.644877-.143462 10.071029-.143462C9.927567-.143462 9.698028-.157808 9.698028-.616886C9.698028-.989888 9.870183-1.448966 9.927567-1.606774C10.185799-2.295391 10.831378-3.988242 10.831378-4.820322C10.831378-5.681093 10.329261-6.326672 9.23895-6.326672C8.277755-6.326672 7.50306-5.781517 6.929213-4.935091C6.886174-5.709786 6.412749-6.326672 5.336785-6.326672C4.059973-6.326672 3.385702-5.422862 3.127471-5.064207C3.084432-5.88194 2.496238-6.326672 1.865005-6.326672C1.448966-6.326672 1.119003-6.125826 .846426-5.58067C.588194-5.064207 .387347-4.189089 .387347-4.131704S.444732-4.002589 .545155-4.002589C.659925-4.002589 .674271-4.016935 .760348-4.346897C.975541-5.193323 1.248119-6.039748 1.821967-6.039748C2.151929-6.039748 2.266699-5.810209 2.266699-5.379823C2.266699-5.064207 2.123237-4.504705 2.022814-4.059973L1.62112-2.510584C1.563735-2.238007 1.405927-1.592428 1.334196-1.334196C1.233773-.961195 1.075965-.286924 1.075965-.215193C1.075965-.014346 1.233773 .143462 1.448966 .143462C1.62112 .143462 1.821967 .057385 1.936736-.157808C1.965429-.229539 2.094545-.731656 2.166276-1.01858L2.481892-2.309738L2.955316-4.203435Z'/>
<path id='g2-110' d='M2.955316-4.203435C2.984009-4.289513 3.342664-5.006822 3.873473-5.465901C4.246474-5.810209 4.734245-6.039748 5.293746-6.039748C5.867594-6.039748 6.068441-5.609363 6.068441-5.035515C6.068441-4.217782 5.480247-2.582315 5.193323-1.807621C5.064207-1.463312 4.992476-1.276811 4.992476-1.01858C4.992476-.373001 5.437208 .143462 6.125826 .143462C7.460022 .143462 7.962139-1.965429 7.962139-2.051506C7.962139-2.123237 7.904754-2.180622 7.818677-2.180622C7.689561-2.180622 7.675215-2.137583 7.603484-1.893698C7.273521-.71731 6.728366-.143462 6.168864-.143462C6.025402-.143462 5.795863-.157808 5.795863-.616886C5.795863-.975541 5.953671-1.405927 6.039748-1.606774C6.326672-2.395815 6.929213-4.002589 6.929213-4.820322C6.929213-5.681093 6.427096-6.326672 5.336785-6.326672C4.059973-6.326672 3.385702-5.422862 3.127471-5.064207C3.084432-5.88194 2.496238-6.326672 1.865005-6.326672C1.405927-6.326672 1.090311-6.054095 .846426-5.566324C.588194-5.049861 .387347-4.189089 .387347-4.131704S.444732-4.002589 .545155-4.002589C.659925-4.002589 .674271-4.016935 .760348-4.346897C.989888-5.222015 1.248119-6.039748 1.821967-6.039748C2.151929-6.039748 2.266699-5.810209 2.266699-5.379823C2.266699-5.064207 2.123237-4.504705 2.022814-4.059973L1.62112-2.510584C1.563735-2.238007 1.405927-1.592428 1.334196-1.334196C1.233773-.961195 1.075965-.286924 1.075965-.215193C1.075965-.014346 1.233773 .143462 1.448966 .143462C1.62112 .143462 1.821967 .057385 1.936736-.157808C1.965429-.229539 2.094545-.731656 2.166276-1.01858L2.481892-2.309738L2.955316-4.203435Z'/>
<path id='g2-114' d='M5.58067-5.867594C5.135938-5.781517 4.906399-5.465901 4.906399-5.150284C4.906399-4.805976 5.178977-4.691206 5.379823-4.691206C5.781517-4.691206 6.111479-5.035515 6.111479-5.465901C6.111479-5.924979 5.666747-6.326672 4.949438-6.326672C4.37559-6.326672 3.715665-6.068441 3.113124-5.193323C3.012701-5.953671 2.438853-6.326672 1.865005-6.326672C1.305504-6.326672 1.01858-5.896286 .846426-5.58067C.60254-5.064207 .387347-4.203435 .387347-4.131704C.387347-4.07432 .444732-4.002589 .545155-4.002589C.659925-4.002589 .674271-4.016935 .760348-4.346897C.975541-5.207669 1.248119-6.039748 1.821967-6.039748C2.166276-6.039748 2.266699-5.795863 2.266699-5.379823C2.266699-5.064207 2.123237-4.504705 2.022814-4.059973L1.62112-2.510584C1.563735-2.238007 1.405927-1.592428 1.334196-1.334196C1.233773-.961195 1.075965-.286924 1.075965-.215193C1.075965-.014346 1.233773 .143462 1.448966 .143462C1.606774 .143462 1.879352 .043039 1.965429-.243885C2.008467-.358655 2.539277-2.52493 2.625354-2.854893C2.697085-3.170509 2.783162-3.471779 2.854893-3.787396C2.912278-3.988242 2.969663-4.217782 3.012701-4.404282C3.05574-4.533398 3.443087-5.236361 3.801742-5.551978C3.973896-5.709786 4.346897-6.039748 4.935091-6.039748C5.16463-6.039748 5.39417-5.99671 5.58067-5.867594Z'/>
<path id='g2-116' d='M2.883585-5.767171H4.203435C4.476013-5.767171 4.619475-5.767171 4.619475-6.025402C4.619475-6.18321 4.533398-6.18321 4.246474-6.18321H2.984009L3.514818-8.277755C3.572203-8.478602 3.572203-8.507294 3.572203-8.607717C3.572203-8.837257 3.385702-8.966372 3.199202-8.966372C3.084432-8.966372 2.75447-8.923334 2.6397-8.464255L2.080198-6.18321H.731656C.444732-6.18321 .315616-6.18321 .315616-5.910633C.315616-5.767171 .41604-5.767171 .688617-5.767171H1.965429L1.01858-1.979775C.90381-1.477658 .860772-1.334196 .860772-1.147696C.860772-.473424 1.334196 .143462 2.137583 .143462C3.586549 .143462 4.361243-1.951083 4.361243-2.051506C4.361243-2.137583 4.303859-2.180622 4.217782-2.180622C4.189089-2.180622 4.131704-2.180622 4.103012-2.123237C4.088666-2.108891 4.07432-2.094545 3.973896-1.865005C3.672626-1.147696 3.012701-.143462 2.180622-.143462C1.750236-.143462 1.721543-.502117 1.721543-.817733C1.721543-.832079 1.721543-1.104657 1.764582-1.276811L2.883585-5.767171Z'/>
<path id='g2-120' d='M6.800097-5.853248C6.341018-5.767171 6.168864-5.422862 6.168864-5.150284C6.168864-4.805976 6.441442-4.691206 6.642289-4.691206C7.072674-4.691206 7.373945-5.064207 7.373945-5.451554C7.373945-6.054095 6.685327-6.326672 6.082787-6.326672C5.207669-6.326672 4.719898-5.465901 4.590783-5.193323C4.26082-6.269288 3.371356-6.326672 3.113124-6.326672C1.649813-6.326672 .875118-4.447321 .875118-4.131704C.875118-4.07432 .932503-4.002589 1.032926-4.002589C1.147696-4.002589 1.176388-4.088666 1.20508-4.146051C1.692851-5.738478 2.654046-6.039748 3.070086-6.039748C3.715665-6.039748 3.84478-5.437208 3.84478-5.092899C3.84478-4.777283 3.758703-4.447321 3.586549-3.758703L3.098778-1.793274C2.883585-.932503 2.467546-.143462 1.707197-.143462C1.635466-.143462 1.276811-.143462 .975541-.329963C1.492004-.430386 1.606774-.860772 1.606774-1.032926C1.606774-1.31985 1.391581-1.492004 1.119003-1.492004C.774695-1.492004 .401693-1.190734 .401693-.731656C.401693-.129116 1.075965 .143462 1.692851 .143462C2.381468 .143462 2.869239-.401693 3.170509-.989888C3.400048-.143462 4.117358 .143462 4.648167 .143462C6.111479 .143462 6.886174-1.73589 6.886174-2.051506C6.886174-2.123237 6.828789-2.180622 6.742712-2.180622C6.613596-2.180622 6.59925-2.108891 6.556211-1.994121C6.168864-.731656 5.336785-.143462 4.691206-.143462C4.189089-.143462 3.916511-.516463 3.916511-1.104657C3.916511-1.420273 3.973896-1.649813 4.203435-2.596661L4.705552-4.547744C4.920745-5.408516 5.408516-6.039748 6.068441-6.039748C6.097133-6.039748 6.498827-6.039748 6.800097-5.853248Z'/>
<path id='g2-122' d='M1.821967-1.162042C2.438853-1.865005 2.94097-2.309738 3.65828-2.955316C4.519052-3.701318 4.892053-4.059973 5.092899-4.275166C6.097133-5.265054 6.59925-6.097133 6.59925-6.211903S6.48448-6.326672 6.455788-6.326672C6.355365-6.326672 6.326672-6.269288 6.254941-6.168864C5.896286-5.551978 5.551978-5.250708 5.178977-5.250708C4.877707-5.250708 4.719898-5.379823 4.447321-5.724132C4.146051-6.082787 3.902165-6.326672 3.486126-6.326672C2.438853-6.326672 1.807621-5.021168 1.807621-4.719898C1.807621-4.67686 1.821967-4.590783 1.951083-4.590783C2.065852-4.590783 2.080198-4.648167 2.123237-4.748591C2.367122-5.322439 3.05574-5.422862 3.328317-5.422862C3.629588-5.422862 3.916511-5.322439 4.217782-5.193323C4.762937-4.963784 4.992476-4.963784 5.135938-4.963784C5.236361-4.963784 5.293746-4.963784 5.365477-4.97813C4.892053-4.418628 4.117358-3.730011 3.471779-3.141817L2.022814-1.807621C1.147696-.918157 .616886-.071731 .616886 .028692C.616886 .11477 .688617 .143462 .774695 .143462S.875118 .129116 .975541-.043039C1.20508-.401693 1.664159-.932503 2.194968-.932503C2.496238-.932503 2.6397-.832079 2.926624-.473424C3.199202-.157808 3.443087 .143462 3.902165 .143462C5.308092 .143462 6.111479-1.678505 6.111479-2.008467C6.111479-2.065852 6.097133-2.151929 5.953671-2.151929C5.838902-2.151929 5.824555-2.094545 5.781517-1.951083C5.465901-1.104657 4.619475-.760348 4.059973-.760348C3.758703-.760348 3.471779-.860772 3.170509-.989888C2.596661-1.219427 2.438853-1.219427 2.252353-1.219427C2.108891-1.219427 1.951083-1.219427 1.821967-1.162042Z'/>
</defs>
<g id='page1' transform='matrix(1.13 0 0 1.13 -63.986043 -61.01997)'>
<use x='56.413267' y='74.600391' xlink:href='#g2-109'/>
<use x='68.700382' y='74.600391' xlink:href='#g2-105'/>
<use x='73.492499' y='74.600391' xlink:href='#g2-110'/>
<use x='84.268619' y='54.372078' xlink:href='#g0-18'/>
<use x='96.731846' y='64.895086' xlink:href='#g2-122'/>
<use x='107.084573' y='64.895086' xlink:href='#g1-0'/>
<use x='121.430761' y='64.895086' xlink:href='#g2-120'/>
<rect x='96.024568' y='70.726931' height='.573822' width='34.095926'/>
<use x='96.024568' y='84.441158' xlink:href='#g2-108'/>
<use x='100.524321' y='84.441158' xlink:href='#g2-101'/>
<use x='107.034847' y='84.441158' xlink:href='#g2-102'/>
<use x='115.490561' y='84.441158' xlink:href='#g2-116'/>
<use x='120.563151' y='84.441158' xlink:href='#g2-76'/>
<use x='134.504004' y='74.600391' xlink:href='#g3-43'/>
<use x='148.617577' y='74.600391' xlink:href='#g3-49'/>
<use x='155.641162' y='74.600391' xlink:href='#g2-59'/>
<use x='163.129665' y='64.895102' xlink:href='#g3-40'/>
<use x='168.592441' y='64.895086' xlink:href='#g2-120'/>
<use x='179.762938' y='64.895086' xlink:href='#g1-0'/>
<use x='194.109126' y='64.895086' xlink:href='#g2-122'/>
<use x='201.273857' y='64.895102' xlink:href='#g3-41'/>
<rect x='163.129665' y='70.726931' height='.573822' width='43.606936'/>
<use x='164.198153' y='84.441158' xlink:href='#g2-114'/>
<use x='170.918703' y='84.441158' xlink:href='#g2-105'/>
<use x='175.71082' y='84.441158' xlink:href='#g2-103'/>
<use x='182.951918' y='84.441158' xlink:href='#g2-104'/>
<use x='191.038181' y='84.441158' xlink:href='#g2-116'/>
<use x='196.11077' y='84.441158' xlink:href='#g2-76'/>
<use x='211.120111' y='74.600391' xlink:href='#g3-43'/>
<use x='225.233684' y='74.600391' xlink:href='#g3-49'/>
<use x='232.25727' y='54.372078' xlink:href='#g0-19'/>
</g>
</svg></p>
<p>Now if you plot this curve on Desmos you&#39;ll see that outside the triangle and past the trailLength the curve dips into the negatives.</p>
<p><img src="<% project.base_url %>/assets/images/unbound_comet_equat.png" alt="" title="null" /></p>
<p>To stop that we will take the max of this curve and 0.</p>
<p><?xml version='1.0' encoding='UTF-8'?>
<!-- Generated by CodeCogs with dvisvgm 2.9.1 -->
<svg class="svg-image" version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='280.100305pt' height='38.890671pt' viewBox='-.239051 -.22797 280.100305 38.890671'>
<defs>
<path id='g1-0' d='M9.454143-3.299625C9.698028-3.299625 9.95626-3.299625 9.95626-3.586549S9.698028-3.873473 9.454143-3.873473H1.692851C1.448966-3.873473 1.190734-3.873473 1.190734-3.586549S1.448966-3.299625 1.692851-3.299625H9.454143Z'/>
<path id='g3-40' d='M4.662514 3.486126C4.662514 3.443087 4.662514 3.414395 4.418628 3.170509C2.984009 1.721543 2.180622-.645579 2.180622-3.572203C2.180622-6.355365 2.854893-8.751179 4.519052-10.44403C4.662514-10.573146 4.662514-10.601839 4.662514-10.644877C4.662514-10.730954 4.590783-10.759647 4.533398-10.759647C4.346897-10.759647 3.170509-9.726721 2.467546-8.320793C1.73589-6.871828 1.405927-5.336785 1.405927-3.572203C1.405927-2.295391 1.606774-.588194 2.352776 .946849C3.199202 2.668392 4.37559 3.600895 4.533398 3.600895C4.590783 3.600895 4.662514 3.572203 4.662514 3.486126Z'/>
<path id='g3-41' d='M4.045627-3.572203C4.045627-4.662514 3.902165-6.441442 3.098778-8.105601C2.252353-9.827144 1.075965-10.759647 .918157-10.759647C.860772-10.759647 .789041-10.730954 .789041-10.644877C.789041-10.601839 .789041-10.573146 1.032926-10.329261C2.467546-8.880295 3.270933-6.513173 3.270933-3.586549C3.270933-.803387 2.596661 1.592428 .932503 3.285279C.789041 3.414395 .789041 3.443087 .789041 3.486126C.789041 3.572203 .860772 3.600895 .918157 3.600895C1.104657 3.600895 2.281045 2.567969 2.984009 1.162042C3.715665-.30127 4.045627-1.850659 4.045627-3.572203Z'/>
<path id='g3-43' d='M5.724132-3.313971H9.683682C9.884529-3.313971 10.14276-3.313971 10.14276-3.572203C10.14276-3.84478 9.898875-3.84478 9.683682-3.84478H5.724132V-7.80433C5.724132-8.005177 5.724132-8.263409 5.465901-8.263409C5.193323-8.263409 5.193323-8.019523 5.193323-7.80433V-3.84478H1.233773C1.032926-3.84478 .774695-3.84478 .774695-3.586549C.774695-3.313971 1.01858-3.313971 1.233773-3.313971H5.193323V.645579C5.193323 .846426 5.193323 1.104657 5.451554 1.104657C5.724132 1.104657 5.724132 .860772 5.724132 .645579V-3.313971Z'/>
<path id='g3-48' d='M6.427096-4.590783C6.427096-5.781517 6.355365-6.943559 5.838902-8.03387C5.250708-9.224604 4.217782-9.54022 3.514818-9.54022C2.682739-9.54022 1.664159-9.12418 1.133349-7.933446C.731656-7.029636 .588194-6.140172 .588194-4.590783C.588194-3.199202 .688617-2.151929 1.20508-1.133349C1.764582-.043039 2.75447 .30127 3.500472 .30127C4.748591 .30127 5.465901-.444732 5.88194-1.276811C6.398403-2.352776 6.427096-3.758703 6.427096-4.590783ZM3.500472 .014346C3.041393 .014346 2.108891-.243885 1.836313-1.807621C1.678505-2.668392 1.678505-3.758703 1.678505-4.762937C1.678505-5.939325 1.678505-7.000943 1.908044-7.847369C2.151929-8.808564 2.883585-9.253296 3.500472-9.253296C4.045627-9.253296 4.877707-8.923334 5.150284-7.689561C5.336785-6.871828 5.336785-5.738478 5.336785-4.762937C5.336785-3.801742 5.336785-2.711431 5.178977-1.836313C4.906399-.258232 4.002589 .014346 3.500472 .014346Z'/>
<path id='g3-49' d='M4.131704-9.195911C4.131704-9.525874 4.131704-9.54022 3.84478-9.54022C3.500472-9.152873 2.783162-8.622064 1.305504-8.622064V-8.206024C1.635466-8.206024 2.352776-8.206024 3.141817-8.579025V-1.104657C3.141817-.588194 3.098778-.41604 1.836313-.41604H1.391581V0C1.778928-.028692 3.170509-.028692 3.643934-.028692S5.494593-.028692 5.88194 0V-.41604H5.437208C4.174743-.41604 4.131704-.588194 4.131704-1.104657V-9.195911Z'/>
<path id='g0-18' d='M10.042337 33.699214C10.042337 33.641829 10.013645 33.613136 9.984952 33.570098C9.454143 33.039289 8.492948 32.078094 7.531753 30.528704C5.222015 26.827386 4.174743 22.164872 4.174743 16.641587C4.174743 12.78246 4.691206 7.80433 7.058328 3.529164C8.191678 1.492004 9.368066 .315616 9.999298-.315616C10.042337-.358655 10.042337-.387347 10.042337-.430386C10.042337-.573848 9.941914-.573848 9.741067-.573848S9.511528-.573848 9.296335-.358655C4.490359 4.016935 2.984009 10.587492 2.984009 16.627241C2.984009 22.265296 4.275166 27.946389 7.9191 32.235902C8.206024 32.565864 8.751179 33.154058 9.339373 33.670521C9.511528 33.842676 9.54022 33.842676 9.741067 33.842676S10.042337 33.842676 10.042337 33.699214Z'/>
<path id='g0-19' d='M7.560445 16.641587C7.560445 11.003532 6.269288 5.322439 2.625354 1.032926C2.33843 .702964 1.793274 .11477 1.20508-.401693C1.032926-.573848 1.004234-.573848 .803387-.573848C.631233-.573848 .502117-.573848 .502117-.430386C.502117-.373001 .559502-.315616 .588194-.286924C1.090311 .229539 2.051506 1.190734 3.012701 2.740123C5.322439 6.441442 6.369711 11.103955 6.369711 16.627241C6.369711 20.486367 5.853248 25.464497 3.486126 29.739664C2.352776 31.776823 1.162042 32.967558 .559502 33.570098C.530809 33.613136 .502117 33.656175 .502117 33.699214C.502117 33.842676 .631233 33.842676 .803387 33.842676C1.004234 33.842676 1.032926 33.842676 1.248119 33.627483C6.054095 29.251893 7.560445 22.681335 7.560445 16.641587Z'/>
<path id='g2-59' d='M2.797508 .057385C2.797508-.774695 2.52493-1.391581 1.936736-1.391581C1.477658-1.391581 1.248119-1.01858 1.248119-.702964S1.463312 0 1.951083 0C2.137583 0 2.295391-.057385 2.424507-.186501C2.453199-.215193 2.467546-.215193 2.481892-.215193C2.510584-.215193 2.510584-.014346 2.510584 .057385C2.510584 .530809 2.424507 1.463312 1.592428 2.395815C1.43462 2.567969 1.43462 2.596661 1.43462 2.625354C1.43462 2.697085 1.506351 2.768816 1.578082 2.768816C1.692851 2.768816 2.797508 1.707197 2.797508 .057385Z'/>
<path id='g2-76' d='M5.265054-8.693795C5.39417-9.23895 5.437208-9.382412 6.699673-9.382412C7.087021-9.382412 7.187444-9.382412 7.187444-9.65499C7.187444-9.798452 7.029636-9.798452 6.972251-9.798452C6.685327-9.798452 6.355365-9.769759 6.068441-9.769759H4.146051C3.873473-9.769759 3.557857-9.798452 3.285279-9.798452C3.170509-9.798452 3.012701-9.798452 3.012701-9.525874C3.012701-9.382412 3.141817-9.382412 3.35701-9.382412C4.232128-9.382412 4.232128-9.267642 4.232128-9.109834C4.232128-9.081142 4.232128-8.995065 4.174743-8.779872L2.238007-1.061618C2.108891-.559502 2.080198-.41604 1.075965-.41604C.803387-.41604 .659925-.41604 .659925-.157808C.659925 0 .746002 0 1.032926 0H7.460022C7.775638 0 7.789984-.014346 7.890408-.272578L8.995065-3.328317C9.023757-3.400048 9.052449-3.486126 9.052449-3.529164C9.052449-3.615241 8.980718-3.672626 8.908988-3.672626C8.894641-3.672626 8.82291-3.672626 8.794218-3.615241C8.765526-3.600895 8.765526-3.572203 8.650756-3.299625C8.191678-2.03716 7.546099-.41604 5.121592-.41604H3.744357C3.54351-.41604 3.514818-.41604 3.428741-.430386C3.270933-.444732 3.256586-.473424 3.256586-.588194C3.256586-.688617 3.285279-.774695 3.313971-.90381L5.265054-8.693795Z'/>
<path id='g2-97' d='M4.318205-1.707197C4.246474-1.463312 4.246474-1.43462 4.045627-1.162042C3.730011-.760348 3.098778-.143462 2.424507-.143462C1.836313-.143462 1.506351-.674271 1.506351-1.520697C1.506351-2.309738 1.951083-3.916511 2.22366-4.519052C2.711431-5.523285 3.385702-6.039748 3.945204-6.039748C4.892053-6.039748 5.078553-4.86336 5.078553-4.748591C5.078553-4.734245 5.035515-4.547744 5.021168-4.519052L4.318205-1.707197ZM5.236361-5.379823C5.078553-5.752824 4.691206-6.326672 3.945204-6.326672C2.324084-6.326672 .573848-4.232128 .573848-2.108891C.573848-.688617 1.405927 .143462 2.381468 .143462C3.170509 .143462 3.84478-.473424 4.246474-.946849C4.389936-.100423 5.064207 .143462 5.494593 .143462S6.269288-.11477 6.527519-.631233C6.757058-1.119003 6.957905-1.994121 6.957905-2.051506C6.957905-2.123237 6.90052-2.180622 6.814443-2.180622C6.685327-2.180622 6.670981-2.108891 6.613596-1.893698C6.398403-1.047272 6.125826-.143462 5.537632-.143462C5.121592-.143462 5.092899-.516463 5.092899-.803387C5.092899-1.133349 5.135938-1.291158 5.265054-1.850659C5.365477-2.209314 5.437208-2.52493 5.551978-2.94097C6.082787-5.092899 6.211903-5.609363 6.211903-5.69544C6.211903-5.896286 6.054095-6.054095 5.838902-6.054095C5.379823-6.054095 5.265054-5.551978 5.236361-5.379823Z'/>
<path id='g2-101' d='M2.567969-3.328317C2.955316-3.328317 3.930858-3.35701 4.619475-3.615241C5.709786-4.031281 5.810209-4.86336 5.810209-5.121592C5.810209-5.752824 5.265054-6.326672 4.318205-6.326672C2.811854-6.326672 .645579-4.963784 .645579-2.410161C.645579-.90381 1.506351 .143462 2.811854 .143462C4.762937 .143462 5.99671-1.377235 5.99671-1.563735C5.99671-1.649813 5.910633-1.721543 5.853248-1.721543C5.810209-1.721543 5.795863-1.707197 5.666747-1.578082C4.748591-.358655 3.385702-.143462 2.840547-.143462C2.022814-.143462 1.592428-.789041 1.592428-1.850659C1.592428-2.051506 1.592428-2.410161 1.807621-3.328317H2.567969ZM1.879352-3.615241C2.496238-5.824555 3.859127-6.039748 4.318205-6.039748C4.949438-6.039748 5.379823-5.666747 5.379823-5.121592C5.379823-3.615241 3.084432-3.615241 2.481892-3.615241H1.879352Z'/>
<path id='g2-102' d='M6.398403-5.767171C6.685327-5.767171 6.800097-5.767171 6.800097-6.039748C6.800097-6.18321 6.685327-6.18321 6.427096-6.18321H5.265054C5.537632-7.660868 5.738478-8.679448 5.853248-9.138527C5.939325-9.482835 6.240595-9.812798 6.613596-9.812798C6.914866-9.812798 7.216136-9.683682 7.359598-9.554566C6.800097-9.497182 6.627942-9.081142 6.627942-8.837257C6.627942-8.550333 6.843135-8.378178 7.115713-8.378178C7.402637-8.378178 7.833023-8.622064 7.833023-9.167219C7.833023-9.769759 7.230483-10.099722 6.59925-10.099722C5.982364-10.099722 5.379823-9.640643 5.092899-9.081142C4.834668-8.579025 4.691206-8.062562 4.361243-6.18321H3.400048C3.127471-6.18321 2.984009-6.18321 2.984009-5.924979C2.984009-5.767171 3.070086-5.767171 3.35701-5.767171H4.275166C4.016935-4.432974 3.428741-1.190734 3.098778 .344309C2.854893 1.592428 2.6397 2.6397 1.92239 2.6397C1.879352 2.6397 1.463312 2.6397 1.20508 2.367122C1.936736 2.309738 1.936736 1.678505 1.936736 1.664159C1.936736 1.377235 1.721543 1.20508 1.448966 1.20508C1.162042 1.20508 .731656 1.448966 .731656 1.994121C.731656 2.611008 1.362889 2.926624 1.92239 2.926624C3.385702 2.926624 3.988242 .30127 4.146051-.41604C4.404282-1.520697 5.107246-5.336785 5.178977-5.767171H6.398403Z'/>
<path id='g2-103' d='M4.849014-1.821967C4.791629-1.592428 4.762937-1.535043 4.576436-1.31985C3.988242-.559502 3.385702-.286924 2.94097-.286924C2.467546-.286924 2.022814-.659925 2.022814-1.649813C2.022814-2.410161 2.453199-4.016935 2.768816-4.662514C3.184855-5.465901 3.830434-6.039748 4.432974-6.039748C5.379823-6.039748 5.566324-4.86336 5.566324-4.777283L5.523285-4.576436L4.849014-1.821967ZM5.738478-5.379823C5.551978-5.795863 5.150284-6.326672 4.432974-6.326672C2.869239-6.326672 1.090311-4.361243 1.090311-2.22366C1.090311-.731656 1.994121 0 2.912278 0C3.672626 0 4.346897-.60254 4.605129-.889464L4.289513 .401693C4.088666 1.190734 4.002589 1.549389 3.486126 2.051506C2.897932 2.6397 2.352776 2.6397 2.03716 2.6397C1.606774 2.6397 1.248119 2.611008 .889464 2.496238C1.348542 2.367122 1.463312 1.965429 1.463312 1.807621C1.463312 1.578082 1.291158 1.348542 .975541 1.348542C.631233 1.348542 .258232 1.635466 .258232 2.108891C.258232 2.697085 .846426 2.926624 2.065852 2.926624C3.916511 2.926624 4.877707 1.73589 5.064207 .961195L6.656635-5.465901C6.699673-5.638055 6.699673-5.666747 6.699673-5.69544C6.699673-5.896286 6.541865-6.054095 6.326672-6.054095C5.982364-6.054095 5.781517-5.767171 5.738478-5.379823Z'/>
<path id='g2-104' d='M4.031281-9.597605C4.045627-9.65499 4.07432-9.741067 4.07432-9.812798C4.07432-9.95626 3.930858-9.95626 3.902165-9.95626C3.887819-9.95626 3.184855-9.898875 3.113124-9.884529C2.869239-9.870183 2.654046-9.84149 2.395815-9.827144C2.03716-9.798452 1.936736-9.784105 1.936736-9.525874C1.936736-9.382412 2.051506-9.382412 2.252353-9.382412C2.955316-9.382412 2.969663-9.253296 2.969663-9.109834C2.969663-9.023757 2.94097-8.908988 2.926624-8.865949L.846426-.559502C.789041-.344309 .789041-.315616 .789041-.229539C.789041 .086077 1.032926 .143462 1.176388 .143462C1.420273 .143462 1.606774-.043039 1.678505-.200847L2.324084-2.797508C2.395815-3.113124 2.481892-3.414395 2.553623-3.730011C2.711431-4.332551 2.711431-4.346897 2.984009-4.762937S3.902165-6.039748 5.006822-6.039748C5.58067-6.039748 5.781517-5.609363 5.781517-5.035515C5.781517-4.232128 5.222015-2.668392 4.906399-1.807621C4.777283-1.463312 4.705552-1.276811 4.705552-1.01858C4.705552-.373001 5.150284 .143462 5.838902 .143462C7.173098 .143462 7.675215-1.965429 7.675215-2.051506C7.675215-2.123237 7.61783-2.180622 7.531753-2.180622C7.402637-2.180622 7.388291-2.137583 7.31656-1.893698C6.986597-.746002 6.455788-.143462 5.88194-.143462C5.738478-.143462 5.508939-.157808 5.508939-.616886C5.508939-.989888 5.681093-1.448966 5.738478-1.606774C5.99671-2.295391 6.642289-3.988242 6.642289-4.820322C6.642289-5.681093 6.140172-6.326672 5.049861-6.326672C4.232128-6.326672 3.514818-5.939325 2.926624-5.193323L4.031281-9.597605Z'/>
<path id='g2-105' d='M4.059973-2.051506C4.059973-2.123237 4.002589-2.180622 3.916511-2.180622C3.787396-2.180622 3.773049-2.137583 3.701318-1.893698C3.328317-.588194 2.740123-.143462 2.266699-.143462C2.094545-.143462 1.893698-.186501 1.893698-.616886C1.893698-1.004234 2.065852-1.43462 2.22366-1.865005L3.227894-4.533398C3.270933-4.648167 3.371356-4.906399 3.371356-5.178977C3.371356-5.781517 2.94097-6.326672 2.238007-6.326672C.918157-6.326672 .387347-4.246474 .387347-4.131704C.387347-4.07432 .444732-4.002589 .545155-4.002589C.674271-4.002589 .688617-4.059973 .746002-4.26082C1.090311-5.465901 1.635466-6.039748 2.194968-6.039748C2.324084-6.039748 2.567969-6.025402 2.567969-5.566324C2.567969-5.193323 2.381468-4.719898 2.266699-4.404282L1.262465-1.73589C1.176388-1.506351 1.090311-1.276811 1.090311-1.01858C1.090311-.373001 1.535043 .143462 2.22366 .143462C3.54351 .143462 4.059973-1.951083 4.059973-2.051506ZM3.945204-8.952026C3.945204-9.167219 3.773049-9.425451 3.457433-9.425451C3.127471-9.425451 2.75447-9.109834 2.75447-8.736833C2.75447-8.378178 3.05574-8.263409 3.227894-8.263409C3.615241-8.263409 3.945204-8.63641 3.945204-8.952026Z'/>
<path id='g2-108' d='M3.643934-9.597605C3.65828-9.65499 3.686972-9.741067 3.686972-9.812798C3.686972-9.95626 3.54351-9.95626 3.514818-9.95626C3.500472-9.95626 2.984009-9.913221 2.725777-9.884529C2.481892-9.870183 2.266699-9.84149 2.008467-9.827144C1.664159-9.798452 1.563735-9.784105 1.563735-9.525874C1.563735-9.382412 1.707197-9.382412 1.850659-9.382412C2.582315-9.382412 2.582315-9.253296 2.582315-9.109834C2.582315-9.052449 2.582315-9.023757 2.510584-8.765526L.731656-1.649813C.688617-1.492004 .659925-1.377235 .659925-1.147696C.659925-.430386 1.190734 .143462 1.92239 .143462C2.395815 .143462 2.711431-.172154 2.94097-.616886C3.184855-1.090311 3.385702-1.994121 3.385702-2.051506C3.385702-2.123237 3.328317-2.180622 3.24224-2.180622C3.113124-2.180622 3.098778-2.108891 3.041393-1.893698C2.783162-.90381 2.52493-.143462 1.951083-.143462C1.520697-.143462 1.520697-.60254 1.520697-.803387C1.520697-.860772 1.520697-1.162042 1.62112-1.563735L3.643934-9.597605Z'/>
<path id='g2-109' d='M2.955316-4.203435C2.984009-4.289513 3.342664-5.006822 3.873473-5.465901C4.246474-5.810209 4.734245-6.039748 5.293746-6.039748C5.867594-6.039748 6.068441-5.609363 6.068441-5.035515C6.068441-4.949438 6.068441-4.662514 5.896286-3.988242L5.537632-2.510584C5.422862-2.080198 5.150284-1.01858 5.121592-.860772C5.064207-.645579 4.97813-.272578 4.97813-.215193C4.97813-.014346 5.135938 .143462 5.351131 .143462C5.781517 .143462 5.853248-.186501 5.982364-.702964L6.843135-4.131704C6.871828-4.246474 7.61783-6.039748 9.195911-6.039748C9.769759-6.039748 9.970606-5.609363 9.970606-5.035515C9.970606-4.232128 9.411104-2.668392 9.095488-1.807621C8.966372-1.463312 8.894641-1.276811 8.894641-1.01858C8.894641-.373001 9.339373 .143462 10.027991 .143462C11.362187 .143462 11.864304-1.965429 11.864304-2.051506C11.864304-2.123237 11.806919-2.180622 11.720842-2.180622C11.591726-2.180622 11.57738-2.137583 11.505649-1.893698C11.175686-.746002 10.644877-.143462 10.071029-.143462C9.927567-.143462 9.698028-.157808 9.698028-.616886C9.698028-.989888 9.870183-1.448966 9.927567-1.606774C10.185799-2.295391 10.831378-3.988242 10.831378-4.820322C10.831378-5.681093 10.329261-6.326672 9.23895-6.326672C8.277755-6.326672 7.50306-5.781517 6.929213-4.935091C6.886174-5.709786 6.412749-6.326672 5.336785-6.326672C4.059973-6.326672 3.385702-5.422862 3.127471-5.064207C3.084432-5.88194 2.496238-6.326672 1.865005-6.326672C1.448966-6.326672 1.119003-6.125826 .846426-5.58067C.588194-5.064207 .387347-4.189089 .387347-4.131704S.444732-4.002589 .545155-4.002589C.659925-4.002589 .674271-4.016935 .760348-4.346897C.975541-5.193323 1.248119-6.039748 1.821967-6.039748C2.151929-6.039748 2.266699-5.810209 2.266699-5.379823C2.266699-5.064207 2.123237-4.504705 2.022814-4.059973L1.62112-2.510584C1.563735-2.238007 1.405927-1.592428 1.334196-1.334196C1.233773-.961195 1.075965-.286924 1.075965-.215193C1.075965-.014346 1.233773 .143462 1.448966 .143462C1.62112 .143462 1.821967 .057385 1.936736-.157808C1.965429-.229539 2.094545-.731656 2.166276-1.01858L2.481892-2.309738L2.955316-4.203435Z'/>
<path id='g2-110' d='M2.955316-4.203435C2.984009-4.289513 3.342664-5.006822 3.873473-5.465901C4.246474-5.810209 4.734245-6.039748 5.293746-6.039748C5.867594-6.039748 6.068441-5.609363 6.068441-5.035515C6.068441-4.217782 5.480247-2.582315 5.193323-1.807621C5.064207-1.463312 4.992476-1.276811 4.992476-1.01858C4.992476-.373001 5.437208 .143462 6.125826 .143462C7.460022 .143462 7.962139-1.965429 7.962139-2.051506C7.962139-2.123237 7.904754-2.180622 7.818677-2.180622C7.689561-2.180622 7.675215-2.137583 7.603484-1.893698C7.273521-.71731 6.728366-.143462 6.168864-.143462C6.025402-.143462 5.795863-.157808 5.795863-.616886C5.795863-.975541 5.953671-1.405927 6.039748-1.606774C6.326672-2.395815 6.929213-4.002589 6.929213-4.820322C6.929213-5.681093 6.427096-6.326672 5.336785-6.326672C4.059973-6.326672 3.385702-5.422862 3.127471-5.064207C3.084432-5.88194 2.496238-6.326672 1.865005-6.326672C1.405927-6.326672 1.090311-6.054095 .846426-5.566324C.588194-5.049861 .387347-4.189089 .387347-4.131704S.444732-4.002589 .545155-4.002589C.659925-4.002589 .674271-4.016935 .760348-4.346897C.989888-5.222015 1.248119-6.039748 1.821967-6.039748C2.151929-6.039748 2.266699-5.810209 2.266699-5.379823C2.266699-5.064207 2.123237-4.504705 2.022814-4.059973L1.62112-2.510584C1.563735-2.238007 1.405927-1.592428 1.334196-1.334196C1.233773-.961195 1.075965-.286924 1.075965-.215193C1.075965-.014346 1.233773 .143462 1.448966 .143462C1.62112 .143462 1.821967 .057385 1.936736-.157808C1.965429-.229539 2.094545-.731656 2.166276-1.01858L2.481892-2.309738L2.955316-4.203435Z'/>
<path id='g2-114' d='M5.58067-5.867594C5.135938-5.781517 4.906399-5.465901 4.906399-5.150284C4.906399-4.805976 5.178977-4.691206 5.379823-4.691206C5.781517-4.691206 6.111479-5.035515 6.111479-5.465901C6.111479-5.924979 5.666747-6.326672 4.949438-6.326672C4.37559-6.326672 3.715665-6.068441 3.113124-5.193323C3.012701-5.953671 2.438853-6.326672 1.865005-6.326672C1.305504-6.326672 1.01858-5.896286 .846426-5.58067C.60254-5.064207 .387347-4.203435 .387347-4.131704C.387347-4.07432 .444732-4.002589 .545155-4.002589C.659925-4.002589 .674271-4.016935 .760348-4.346897C.975541-5.207669 1.248119-6.039748 1.821967-6.039748C2.166276-6.039748 2.266699-5.795863 2.266699-5.379823C2.266699-5.064207 2.123237-4.504705 2.022814-4.059973L1.62112-2.510584C1.563735-2.238007 1.405927-1.592428 1.334196-1.334196C1.233773-.961195 1.075965-.286924 1.075965-.215193C1.075965-.014346 1.233773 .143462 1.448966 .143462C1.606774 .143462 1.879352 .043039 1.965429-.243885C2.008467-.358655 2.539277-2.52493 2.625354-2.854893C2.697085-3.170509 2.783162-3.471779 2.854893-3.787396C2.912278-3.988242 2.969663-4.217782 3.012701-4.404282C3.05574-4.533398 3.443087-5.236361 3.801742-5.551978C3.973896-5.709786 4.346897-6.039748 4.935091-6.039748C5.16463-6.039748 5.39417-5.99671 5.58067-5.867594Z'/>
<path id='g2-116' d='M2.883585-5.767171H4.203435C4.476013-5.767171 4.619475-5.767171 4.619475-6.025402C4.619475-6.18321 4.533398-6.18321 4.246474-6.18321H2.984009L3.514818-8.277755C3.572203-8.478602 3.572203-8.507294 3.572203-8.607717C3.572203-8.837257 3.385702-8.966372 3.199202-8.966372C3.084432-8.966372 2.75447-8.923334 2.6397-8.464255L2.080198-6.18321H.731656C.444732-6.18321 .315616-6.18321 .315616-5.910633C.315616-5.767171 .41604-5.767171 .688617-5.767171H1.965429L1.01858-1.979775C.90381-1.477658 .860772-1.334196 .860772-1.147696C.860772-.473424 1.334196 .143462 2.137583 .143462C3.586549 .143462 4.361243-1.951083 4.361243-2.051506C4.361243-2.137583 4.303859-2.180622 4.217782-2.180622C4.189089-2.180622 4.131704-2.180622 4.103012-2.123237C4.088666-2.108891 4.07432-2.094545 3.973896-1.865005C3.672626-1.147696 3.012701-.143462 2.180622-.143462C1.750236-.143462 1.721543-.502117 1.721543-.817733C1.721543-.832079 1.721543-1.104657 1.764582-1.276811L2.883585-5.767171Z'/>
<path id='g2-120' d='M6.800097-5.853248C6.341018-5.767171 6.168864-5.422862 6.168864-5.150284C6.168864-4.805976 6.441442-4.691206 6.642289-4.691206C7.072674-4.691206 7.373945-5.064207 7.373945-5.451554C7.373945-6.054095 6.685327-6.326672 6.082787-6.326672C5.207669-6.326672 4.719898-5.465901 4.590783-5.193323C4.26082-6.269288 3.371356-6.326672 3.113124-6.326672C1.649813-6.326672 .875118-4.447321 .875118-4.131704C.875118-4.07432 .932503-4.002589 1.032926-4.002589C1.147696-4.002589 1.176388-4.088666 1.20508-4.146051C1.692851-5.738478 2.654046-6.039748 3.070086-6.039748C3.715665-6.039748 3.84478-5.437208 3.84478-5.092899C3.84478-4.777283 3.758703-4.447321 3.586549-3.758703L3.098778-1.793274C2.883585-.932503 2.467546-.143462 1.707197-.143462C1.635466-.143462 1.276811-.143462 .975541-.329963C1.492004-.430386 1.606774-.860772 1.606774-1.032926C1.606774-1.31985 1.391581-1.492004 1.119003-1.492004C.774695-1.492004 .401693-1.190734 .401693-.731656C.401693-.129116 1.075965 .143462 1.692851 .143462C2.381468 .143462 2.869239-.401693 3.170509-.989888C3.400048-.143462 4.117358 .143462 4.648167 .143462C6.111479 .143462 6.886174-1.73589 6.886174-2.051506C6.886174-2.123237 6.828789-2.180622 6.742712-2.180622C6.613596-2.180622 6.59925-2.108891 6.556211-1.994121C6.168864-.731656 5.336785-.143462 4.691206-.143462C4.189089-.143462 3.916511-.516463 3.916511-1.104657C3.916511-1.420273 3.973896-1.649813 4.203435-2.596661L4.705552-4.547744C4.920745-5.408516 5.408516-6.039748 6.068441-6.039748C6.097133-6.039748 6.498827-6.039748 6.800097-5.853248Z'/>
<path id='g2-122' d='M1.821967-1.162042C2.438853-1.865005 2.94097-2.309738 3.65828-2.955316C4.519052-3.701318 4.892053-4.059973 5.092899-4.275166C6.097133-5.265054 6.59925-6.097133 6.59925-6.211903S6.48448-6.326672 6.455788-6.326672C6.355365-6.326672 6.326672-6.269288 6.254941-6.168864C5.896286-5.551978 5.551978-5.250708 5.178977-5.250708C4.877707-5.250708 4.719898-5.379823 4.447321-5.724132C4.146051-6.082787 3.902165-6.326672 3.486126-6.326672C2.438853-6.326672 1.807621-5.021168 1.807621-4.719898C1.807621-4.67686 1.821967-4.590783 1.951083-4.590783C2.065852-4.590783 2.080198-4.648167 2.123237-4.748591C2.367122-5.322439 3.05574-5.422862 3.328317-5.422862C3.629588-5.422862 3.916511-5.322439 4.217782-5.193323C4.762937-4.963784 4.992476-4.963784 5.135938-4.963784C5.236361-4.963784 5.293746-4.963784 5.365477-4.97813C4.892053-4.418628 4.117358-3.730011 3.471779-3.141817L2.022814-1.807621C1.147696-.918157 .616886-.071731 .616886 .028692C.616886 .11477 .688617 .143462 .774695 .143462S.875118 .129116 .975541-.043039C1.20508-.401693 1.664159-.932503 2.194968-.932503C2.496238-.932503 2.6397-.832079 2.926624-.473424C3.199202-.157808 3.443087 .143462 3.902165 .143462C5.308092 .143462 6.111479-1.678505 6.111479-2.008467C6.111479-2.065852 6.097133-2.151929 5.953671-2.151929C5.838902-2.151929 5.824555-2.094545 5.781517-1.951083C5.465901-1.104657 4.619475-.760348 4.059973-.760348C3.758703-.760348 3.471779-.860772 3.170509-.989888C2.596661-1.219427 2.438853-1.219427 2.252353-1.219427C2.108891-1.219427 1.951083-1.219427 1.821967-1.162042Z'/>
</defs>
<g id='page1' transform='matrix(1.13 0 0 1.13 -63.986043 -61.01997)'>
<use x='56.413267' y='74.600391' xlink:href='#g2-109'/>
<use x='68.700382' y='74.600391' xlink:href='#g2-97'/>
<use x='76.074312' y='74.600391' xlink:href='#g2-120'/>
<use x='86.447811' y='54.372078' xlink:href='#g0-18'/>
<use x='97.008246' y='74.600391' xlink:href='#g3-48'/>
<use x='104.031831' y='74.600391' xlink:href='#g2-59'/>
<use x='110.32482' y='74.600391' xlink:href='#g2-109'/>
<use x='122.611935' y='74.600391' xlink:href='#g2-105'/>
<use x='127.404052' y='74.600391' xlink:href='#g2-110'/>
<use x='138.180172' y='54.372078' xlink:href='#g0-18'/>
<use x='150.643399' y='64.895086' xlink:href='#g2-122'/>
<use x='160.996126' y='64.895086' xlink:href='#g1-0'/>
<use x='175.342314' y='64.895086' xlink:href='#g2-120'/>
<rect x='149.936121' y='70.726931' height='.573822' width='34.095926'/>
<use x='149.936121' y='84.441158' xlink:href='#g2-108'/>
<use x='154.435874' y='84.441158' xlink:href='#g2-101'/>
<use x='160.946399' y='84.441158' xlink:href='#g2-102'/>
<use x='169.402114' y='84.441158' xlink:href='#g2-116'/>
<use x='174.474704' y='84.441158' xlink:href='#g2-76'/>
<use x='188.415556' y='74.600391' xlink:href='#g3-43'/>
<use x='202.52913' y='74.600391' xlink:href='#g3-49'/>
<use x='209.552715' y='74.600391' xlink:href='#g2-59'/>
<use x='217.041218' y='64.895102' xlink:href='#g3-40'/>
<use x='222.503994' y='64.895086' xlink:href='#g2-120'/>
<use x='233.674491' y='64.895086' xlink:href='#g1-0'/>
<use x='248.020679' y='64.895086' xlink:href='#g2-122'/>
<use x='255.18541' y='64.895102' xlink:href='#g3-41'/>
<rect x='217.041218' y='70.726931' height='.573822' width='43.606936'/>
<use x='218.109706' y='84.441158' xlink:href='#g2-114'/>
<use x='224.830256' y='84.441158' xlink:href='#g2-105'/>
<use x='229.622372' y='84.441158' xlink:href='#g2-103'/>
<use x='236.863471' y='84.441158' xlink:href='#g2-104'/>
<use x='244.949734' y='84.441158' xlink:href='#g2-116'/>
<use x='250.022323' y='84.441158' xlink:href='#g2-76'/>
<use x='265.031664' y='74.600391' xlink:href='#g3-43'/>
<use x='279.145237' y='74.600391' xlink:href='#g3-49'/>
<use x='286.168823' y='54.372078' xlink:href='#g0-19'/>
<use x='296.729198' y='54.372078' xlink:href='#g0-19'/>
</g>
</svg></p>
<p><img src="<% project.base_url %>/assets/images/bounded_comet_equat.png" alt="" title="null" /></p>
<p>And that&#39;s it. We can now convert this into code.
So inside the <code>CometAnimation</code> class add this function:</p>
<code-snippet src="<% project.base_url %>/assets/advanced-animations-js-scripts.txt" lang="js" lines="96-103"></code-snippet>
<p>And thats the alpha for our LEDs. The next step is to calculate the colors. For this we can re-use the alpha function as it goes from 1 to 0 as we move from the head to the tail. The only problem is that the tail color won&#39;t be very visible as it would have faded out at the same time it has faded to the trail color. So we can do one simple modification. If we square the result of the alpha equation we get a curved triangle like so:</p>
<p><img src="<% project.base_url %>/assets/images/squared_comet_equat.png" alt="" title="null" /></p>
<p>In this graph the dotted line is the original alpha equation and the solid one is the squared result. This means that the color would fade to the tail color faster that the LEDs would fade out. This also means we only need to calculate the alpha equation once.</p>
<p>So to add the colors we add the last function. Inside the <code>getLEDColor()</code> function add this code:</p>
<code-snippet src="<% project.base_url %>/assets/advanced-animations-js-scripts.txt" lang="js" lines="104-106"></code-snippet>
<p>And that&#39;s it. We can now go back to the <code>index.mjs</code> file and add this line to the top, after the <code>SimpleAnimation</code> import:</p>
<code-snippet src="<% project.base_url %>/assets/advanced-animations-js-scripts.txt" lang="js" lines="107-109"></code-snippet>
<p>And in the map of our animations you can add a new one using the comet animation, like so:</p>
<code-snippet src="<% project.base_url %>/assets/advanced-animations-js-scripts.txt" lang="js" lines="110-117"></code-snippet>
<p>And now the comet animation will play on cheer events.</p>
<p>This system can be expanded to much more complex animations. It&#39;s up to you to find good combinations, colors and style that you like. I will slowly create some example animation types, but they won&#39;t have in depth tutorials like this, just comments explaining parts of the code that are unique or interesting.</p>
<p>That&#39;s the end of this tutorial, much of what comes next depends on what you want to add to your system. With some research you might be able to add other devices and or displays. Some good resources are the various documentation sites for these libraries we have used. These can be found linked in the first page of this tutorial, or by searching the library name and the word documentation.</p>
<p>As mentioned in the first page of the tutorial, the example code is slightly different to that of the tutorial as I have added a few bits that enable the use of the code in a web browser so that I could test easier. If you do decide to clone the repository and want to use these tools you can install a package called <code>lite-server</code>. It runs a private webserver on your machine and will provide the files in this folder to the browser.</p>
<p>To install it just run</p>
<code-snippet src="<% project.base_url %>/assets/advanced-animations-sh-scripts.txt" lang="sh" lines="1"></code-snippet>
<p>and then in a terminal inside the project folder just run the command</p>
<code-snippet src="<% project.base_url %>/assets/advanced-animations-sh-scripts.txt" lang="sh" lines="3"></code-snippet>
<p>This will open a new tab in the browser with a URL similar to <code>http://localhost:3000</code>. This is the address of the temporary server it is running. To access the simulations just add <code>/test.html</code> to the end of the address and you should get a page with a line of black dots and some buttons. The dots simulate the LEDs and the buttons will play various animations. To write your own and see what they look like open up <code>test.js</code> and look for the line</p>
<code-snippet src="<% project.base_url %>/assets/advanced-animations-js-scripts.txt" lang="js" lines="118-121"></code-snippet>
<p>Either modify the existing ones or add new ones to the list. New buttons will automatically show up for each animation and you can experiment with the various example animation types.</p>
